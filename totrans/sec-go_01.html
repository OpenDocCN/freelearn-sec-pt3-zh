<html><head></head><body>
        

                            
                    <h1 class="header-title">Introduction to Security with Go</h1>
                
            
            
                
<p>Security and privacy, as practical matters, have continued to gain interest, especially in the technology industry. The cybersecurity market is booming and continuing to grow. The industry moves fast with innovations and research coming out constantly. Not only has the interest and speed of security picked up, but the scale of applications along with the risk have also grown by orders of magnitude. The industry needs a programming language that is simple to learn, cross-platform, and efficient on a large scale. Go is the perfect fit, having an extremely powerful standard library, short learning curve, and blazing speed.</p>
<p>In this chapter, we will cover the following topics:</p>
<ul>
<li>Go's history, language design, criticisms, community, and learning tips</li>
<li>Why use Go for security</li>
<li>Setting up a development environment and writing your first program</li>
<li>Running the example programs</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">About Go</h1>
                
            
            
                
<p>Go is an open source programming language that was created by Google and distributed under a BSD-style license. A BSD license allows anyone to use Go free of charge, as long as the copyright notice is retained and the Google name is not used for endorsement or promotion. Go is heavily influenced by C, but has simpler syntax, and better memory safety and garbage collection. Sometimes, Go is described as a modern-day C++. I think that is too much of a simplification, but Go is definitely a simple but modern language.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Go language design</h1>
                
            
            
                
<p>The original goal of Go was to create a new language that is simple, reliable, and efficient. As mentioned, Go is heavily influenced by C programming language. The language itself is very simple, with only 25 keywords. It was built to integrate well with IDEs, but not to be dependent on them. In my experience, anyone who has tried Go has found it very user-friendly with a short learning curve.</p>
<p>One of the main goals of Go was to deal with some of the negative aspects of C++ and Java code, while retaining the performance. The language needed to be simple and consistent to manage very large development teams.</p>
<p>Variables are statically typed, and applications are compiled quickly to statically linked binaries. Having a single statically linked binary makes it very easy to create lightweight containers. The final applications run fast as well, running close to C++ and Java performance and much faster than interpreted languages such as Python. There are pointers, but there is no pointer arithmetic allowed. Go does not tout itself as an object-oriented programming language, and it does not formally have <em>classes</em> in the traditional sense; however, it does contain a number of mechanisms that closely resemble an object-oriented programming language. This is discussed in more depth in the following chapter. Interfaces are used heavily, and composition is the equivalent of inheritance.</p>
<p>Go has many interesting features. One feature that stands out is the built-in concurrency. Just put the word "go" before any function call, and it will spawn a lightweight thread to execute the function. Another feature that is quite important is the dependency management, which is very efficient. The dependency management is part of the reason Go compiles incredibly fast. It does not re-include the same header files multiple times, the way C++ does. Go also has built-in memory safety, and a garbage collector handles clean-up of unused memory. The standard library in Go is pretty impressive too. It is modern and contains networking, HTTP, TLS, XML, JSON, database, image manipulation, and cryptography packages. Go also supports Unicode, allowing all kinds of characters to be used in source code.</p>
<p>The Go toolchain is central to the ecosystem. It provides tools to download and install remote dependencies, run unit tests and benchmarks, generate code, and format code according to the Go formatting standards. It also includes the compiler, linker, and assembler, which compile very quickly and also allow for easy cross-compiling by simply changing the <kbd>GOOS</kbd> and <kbd>GOARCH</kbd> environment variables.</p>
<p>Some features were excluded from the Go language. Generics, inheritance, assertions, exceptions, pointer arithmetic, and implicit type conversions were all left out of Go. Many features were omitted intentionally, namely generics, assertions, and pointer arithmetic. The authors left out some features because they wanted to maintain performance, keep the language specification as simple as possible, or they could not agree on the best way to implement, or because a feature was too controversial. Inheritance was also left out intentionally in favor of using interfaces and composition instead. Some other features, such as generics, were left out because there was too much debate concerning their proper implementation, but they may show up in Go 2.0. The authors recognized that it is much easier to add a feature to a language than to take one away.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">The History of Go</h1>
                
            
            
                
<p>Go is a relatively young language, with its inception in 2007 and open sourcing in 2009. It started at Google as a <em>20% project</em> with Robert Griesemer, Rob Pike, and Ken Thompson. A 20% project means that the project's developers spent 20% of their time working on it as an experimental side project. Go 1.0 was officially released in March 2012. It was planned from the beginning to be an open source language. Until Go 1.5, the compiler, linker, and assembler were written in C. After version 1.5, everything was written in Go.</p>
<p>Google initially launched Go for Linux and macOS, and the community drove the effort for other platforms, namely Windows, FreeBSD, OpenBSD, NetBSD, and Solaris. It has even been ported to IBM z Systems mainframes. Bill O'Farrell of IBM gave a talk at GopherCon 2016 in Denver titled <em>Porting Go to the IBM z Architecture</em> (<a href="https://www.youtube.com/watch?v=z0f4Wgi94eo" target="_blank">https://www.youtube.com/watch?v=z0f4Wgi94eo</a>).</p>
<p>Google is known to use Python, Java, and C++. It is understandable why they chose those languages too. They each fill certain roles and have their own strengths and weaknesses. Go was an attempt to create a new language that fits the needs of Google. They needed software that could perform extremely well under heavy loads, support concurrency, and that was easy to read and write, and compile quickly.</p>
<p>The triggering event for starting the Go project was dealing with a massive C++ code base that took hours to build because of the way C++ handles dependencies and re-includes headers (<a href="https://www.youtube.com/watch?v=bj9T2c2Xk_s">https://www.youtube.com/watch?v=bj9T2c2Xk_s</a> (37:15)). This is why one of Go's main goals was to compile quickly. Go helped turn hours of compile time to seconds because it handles dependencies much more efficiently than C++.</p>
<p>Discussions for Go 2.0 have begun, but they are still in the conceptual stages. There is no timeline for a release, and there is no rush to release a new major version.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Adoption and community</h1>
                
            
            
                
<p>Go is still a young language, but it has seen growing adoption rates and has continued to increase in popularity. Go was the TIOBE Language of the year in 2009 and 2016:</p>
<div><img height="368" width="729" src="img/3d9b13c6-b329-4bdc-8ebe-4e563bf87d0d.png"/></div>
<p>Source: https://www.tiobe.com/tiobe-index/go/</p>
<p>One of the expectations expressed by the Go team was the anticipation that Go would draw a lot of C/C++ and Java developers, but they were surprised when a large number of the users came from scripting languages such as Python and Ruby. Others, like myself, found Go to be a natural complement to Python, a great language. However, which language do you go to when you need something much more powerful? Some large companies have demonstrated that Go is stable for large-scale production use, including Google, Dropbox, Netflix, Uber, and SoundCloud.</p>
<p>The first Go conference, named GopherCon, was held in 2014. Since then, GopherCon has been held every year. Read more about GopherCon at <a href="https://gophercon.com">https://gophercon.com</a>. I had the privilege of speaking at the 2016 GopherCon about packet capturing and had a great experience (<a href="https://www.youtube.com/watch?v=APDnbmTKjgM">https://www.youtube.com/watch?v=APDnbmTKjgM</a>).</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Common criticisms about Go</h1>
                
            
            
                
<p>There are a few criticisms that show up repeatedly in the community. Probably the most notorious and most-discussed criticism is the lack of generics. This leads to repeated code to handle different data types. Interfaces can be used to some extent to alleviate this problem. We might see generics in a future release, as the authors have shown openness to generics, but they did not rush through an important design decision.</p>
<p>The next criticism often heard is the lack of exceptions. The developer must explicitly handle or ignore each error. Personally, I found this to be a refreshing change. It's not really that much more work, and you have full control over the code flow. Sometimes with exceptions you are not positive where it will get caught as it bubbles up. With Go, you can easily follow the error-handling code.</p>
<p>Go has a garbage collector that handles memory cleanup. The garbage collector has been upgraded over time and continues to improve. The garbage collector does have a minor performance impact, but saves the developer a lot of thinking and worrying. Go was originally described as a systems programming language, and the lack of control over the memory was restrictive for very low-level applications. Since then, they have pivoted away from calling Go a systems programming language. If you need low-level control over memory, then you will have to write portions of code in C.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">The Go toolchain</h1>
                
            
            
                
<p>The <kbd>go</kbd> executable is the main application of the Go toolchain. You can pass a command to <kbd>go</kbd>, and it will take the appropriate action. The toolchain has tools to run, compile, format source code, download dependencies, and more. Let's look at the full list, which is obtained as an output from the <kbd>go help</kbd> command or just <kbd>go</kbd> by itself:</p>
<ul>
<li><kbd>build</kbd>: This compiles packages and dependencies</li>
<li><kbd>clean</kbd>: This removes object files</li>
<li><kbd>doc</kbd>: This shows documentation for a package or symbol</li>
<li><kbd>env</kbd>: This prints Go environment information</li>
<li><kbd>generate</kbd>: This is the code generator</li>
<li><kbd>fix</kbd>: This upgrades Go code when a new version is released</li>
<li><kbd>fmt</kbd>: This runs <kbd>gofmt</kbd> on package sources</li>
<li><kbd>get</kbd>: This downloads and installs packages and dependencies</li>
<li><kbd>help</kbd>: This provides more help on a specific topic</li>
<li><kbd>install</kbd>: This compiles and installs packages and dependencies</li>
<li><kbd>list</kbd>: This lists packages</li>
<li><kbd>run</kbd>: This compiles and runs Go programs</li>
<li><kbd>test</kbd>: This runs unit tests and benchmarks</li>
<li><kbd>vet</kbd>: This examines source code for bugs</li>
<li><kbd>version</kbd>: This shows the Go version</li>
</ul>
<p>More information about these commands is available at <a href="https://golang.org/cmd/">https://golang.org/cmd/</a>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Go mascot</h1>
                
            
            
                
<p>Everyone knows that the best swords have names, and the best programming languages have mascots. Go's mascot is the <strong>gopher</strong>. The gopher has no name. It has a jelly bean shaped body, microscopic limbs, gigantic eyes, and two teeth. It was designed by Renee French, and its copyright comes under the <em>Creative Commons Attribution 3.0</em> license. This means that you can play with the images, but you must give credit to their creator, Renee French, wherever they are used.</p>
<p>Renee French gave a talk at GopherCon 2016 in Denver, entitled <em>The Go Gopher: A Character Study</em>, explaining how the gopher came to be, the various mediums and forms it has taken, and the tips on drawing it in various situations (<a href="https://www.youtube.com/watch?v=4rw_B4yY69k">https://www.youtube.com/watch?v=4rw_B4yY69k</a>).</p>
<p>You can generate a custom gopher avatar at <a href="https://gopherize.me/">https://gopherize.me/</a> and read more about the Go gopher at <a href="https://blog.golang.org/gopher">https://blog.golang.org/gopher</a>.</p>
<div><img height="146" width="367" src="img/13098b0b-f4f5-4d83-b780-4a505d29a41b.jpg"/></div>
<p> </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Learning Go</h1>
                
            
            
                
<p>If you have never used Go before, have no fear. It has a gentle learning curve and is simple enough to learn in just a day or two. The best place to start is <a href="https://tour.golang.org/">https://tour.golang.org/</a>. This is a basic tour of the Go programming language. If you have already gone through the tour, then you should already have the foundation to make it through this book just fine. If you are working through this book and have not taken the tour, you may come across a concept you are not familiar with that is not explained here. The tour is a good place to learn and practice.</p>
<p>Since there are only 25 reserved keywords in the language specification, it is short enough to be understood by "mortals". You can read more about the specs at <a href="https://golang.org/ref/spec">https://golang.org/ref/spec</a>.</p>
<p>You must be already be familiar with most of these keywords. These are: <kbd>if</kbd>, <kbd>else</kbd>, <kbd>goto</kbd>, <kbd>for</kbd>, <kbd>import</kbd>, <kbd>return</kbd>, <kbd>var</kbd>, <kbd>continue</kbd>, <kbd>break</kbd>, <kbd>range</kbd>, <kbd>type</kbd>, <kbd>func</kbd>, <kbd>interface</kbd>, <kbd>package</kbd>, <kbd>const</kbd>, <kbd>map</kbd>, <kbd>struct</kbd>, <kbd>select</kbd>, <kbd>case</kbd>, <kbd>switch</kbd>, <kbd>go</kbd>, <kbd>defer</kbd>, <kbd>chan</kbd>, <kbd>fallthrough</kbd>, and <kbd>default</kbd>.</p>
<p>The tour will help you learn the keywords, syntaxes, and basics of the data structures. The playground in the tour lets you practice writing and running code in the browser.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Why use Go?</h1>
                
            
            
                
<p>There are several aspects that appeal to me about Go. Concurrency, speed, and simplicity are the most important things to me. The language is very simple and easy to learn. There are no <kbd>try</kbd>, <kbd>catch</kbd>, and exception flows. Though several people cite the tedious error handling as a criticism, I find it refreshing to have a simple language that does not hide a lot of magic behind the scenes and does exactly what it says. The <kbd>go fmt</kbd> tool standardizes formatting, making it easy to read code from others, and eliminates the burden of defining your own standard.</p>
<p>Go provides a feeling of scalability and reliability and is actually an enjoyable experience. Before Go, the primary option for fast, compiled code was C++, and it was no simple task to manage the header files and build processes for different platforms. C++ has become a very complicated language over the years and is not nearly as approachable as Go for most people.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Why use Go for security?</h1>
                
            
            
                
<p>I think we all understand that there is no such thing as the best programming language, but there are different tools for different jobs. Go excels in performance and concurrency. Some of its other benefits include the ability to compile down to a single executable and cross-compile easily. It also has a modern standard library well-suited for networked applications.</p>
<p>The ease of cross-compiling makes for some interesting use cases in the security field. Here are a couple of use cases for cross-compiling in security:</p>
<ul>
<li>Penetration testers can use a Raspberry Pi to compile custom Go reverse shells for Windows, macOS, and Linux, and attempt to deploy them.</li>
<li>Network defenders can have one central database to store all honeypot information provided from honeypot servers, and then cross-compile the honeypot servers. This would allow them to easily deploy a consistent application across all platforms, including Windows, mac, and Linux.</li>
<li>Network defenders could deploy incredibly lightweight honeypots throughout their network in the form of a Docker container with a single statically linked binary. Containers would be quick to create and destroy, using minimal bandwidth and server resources.</li>
</ul>
<p>When you ask yourself whether Go is a good language choice, it may help to compare Go with some of the other top language choices.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Why not use Python?</h1>
                
            
            
                
<p>Python is a popular language in the security field. This is most likely because of its ubiquity, short learning curve, and plethora of libraries. There are already several useful tools for security written in Python, namely Scapy for packet capturing, Scrapy for web scraping, Immunity for debugging, Beautiful Soup for parsing HTML, and Volatility for memory forensics. Many vendors and service providers also provide API examples in Python.</p>
<p>Python is easy to learn, and there are plenty of resources. Go is also easy to write and has a gentle learning curve. The learning curve and the ease of programming is not a major differentiating factor between Go and Python in my opinion. This biggest distinction, and where Python falls short, is performance. Python cannot compete with Go in terms of performance. Part of it is the interpreted nature of Python, but a larger factor is the <strong>global interpreter lock</strong> or <strong>GIL</strong>. The GIL prevents the interpreter from using more than one CPU worth of processing power, even with multiple threads executing. There are some ways to get around this, such as using multiprocessing, but this has its own drawbacks and limitations, as it actually forks a new process. Other options are using Jython (Python on Java) or IronPython (Python on .NET), and these have no GIL.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Why not use Java?</h1>
                
            
            
                
<p>One of Java's greatest strengths is the ability to <strong>write once, run anywhere</strong> (<strong>WORA</strong>). This is incredibly valuable if you have to do anything involving GUI, graphics, or audio. Go certainly does not beat Java in its ability to create GUIs, but it is cross-platform and supports cross-compiling.</p>
<p>Java is mature and widely adopted with lots of resources available. There are more options with Java libraries than Go packages. Java is the more verbose of the two languages. The Java ecosystem is more complex with several options for build tools and package managers. Go is much simpler and more standardized. These differences could simply be attributed to the age difference between the languages, but it may still affect your language choice.</p>
<p>In certain situations, the <strong>Java virtual machine</strong> (<strong>JVM</strong>) can be too resource intensive in terms of memory or startup time. If you need to pipe together several command-line Java applications, the startup time for the JVM just to run a series of short-lived programs can be a significant performance hit. In terms of memory, if you need to run several instances of the same application, then the memory required to run each JVM can add up. The JVM can also be restricting since it creates a sandbox and limits your access to the host machine. Go compiles down to native machine code and thus has no need for a virtual machine layer.</p>
<p>Go is well-documented and the community continues to grow and provide more resources. It is an easy language to learn, especially for experienced programmers. Concurrency is a bit simpler and built into the language, as opposed to a library package.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Why not use C++?</h1>
                
            
            
                
<p>C++ does offer a little more control since the developer is in charge of memory management and there is no garbage collector. For this same reason, C++ will have slightly better performance. In some cases, Go can actually outperform C++.</p>
<p>C++ is very mature and has a large set of third-party libraries. Libraries are not always cross-platform and can have complex makefiles. Cross-compiling is much simpler in Go and can be done with the Go toolchain.</p>
<p>Go compiles with more efficiency because it has better dependency management. C++ can re-include the same header file multiple times and cause compilation times to balloon. The package system is more consistent and standardized in Go. Threads and concurrency are native to Go and require platform-specific libraries in C++.</p>
<p>The maturity of C++ has also led to the language growing and becoming more complicated over time. Go is a refreshing change with a simple-yet-modern language. C++ is not as friendly to beginners as Go.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Development environment</h1>
                
            
            
                
<p>All of the examples in this book will run across major platforms, Windows, macOS, and Linux. Having said that, the examples were primarily written and developed on Ubuntu Linux, and this is the recommended platform for the following examples.</p>
<p>Ubuntu Linux is available for free at <a href="https://www.ubuntu.com/download/desktop">https://www.ubuntu.com/download/desktop</a>. The download page may ask for a donation, but you can choose to download for free. Ubuntu is not required, but the book will be easier to follow if you have the same environment. Other Linux distributions should work equally well, but I strongly recommend that you use a Debian-based distribution. Most of the Go code examples in this book will work on Windows, Linux, and Mac without any modification. Certain examples may be Linux- and Mac-specific, such as file permissions, which are not treated similarly in Windows. Any example that is specific to a platform is mentioned.</p>
<p>You can install Ubuntu for free inside a virtual machine or as your primary operating system. As long as your system has enough CPU, RAM, and disk space, I recommend that you use a virtual machine with Oracle VirtualBox, which is available at <a href="https://www.virtualbox.org/">https://www.virtualbox.org/</a>. VMWare Player is an alternative to VirtualBox and is available at <a href="https://www.vmware.com/products/player/playerpro-evaluation.html">https://www.vmware.com/products/player/playerpro-evaluation.html</a>.</p>
<p>Download and install VirtualBox, and then, download the Ubuntu desktop ISO file. Create a virtual machine, have it boot the Ubuntu ISO, and choose the Install option. Once you have installed Ubuntu and logged in as your user, you can install the Go programming language. Ubuntu makes this incredibly easy by providing a package. Just open a Terminal window and run the following command:</p>
<pre><strong>sudo apt-get install golang-go</strong></pre>
<p>Using <kbd>sudo</kbd> elevates your privileges in order to install and may ask you for your password. If everything was successful, you will now have access to the <kbd>go</kbd> executable, which contains the whole toolchain. You can run <kbd>go help</kbd> or <kbd>go</kbd> by itself for usage instructions.</p>
<p>If you are not using Ubuntu or want to install the latest version, you can download the latest version from <a href="https://golang.org/dl/">https://golang.org/dl</a>. The Windows and Mac installer will take care of updating your <kbd>PATH</kbd> environment variable, but in Linux you will have to move the extracted contents to a desired location, such as <kbd>/opt/go</kbd>, and then update your <kbd>PATH</kbd> environment variable manually to include the location. Consider this example:</p>
<pre><strong># Extract the downloaded Go tar.gz</strong><br/><strong>tar xzf go1.9.linux-amd64.tar.gz</strong><br/><strong># Move the extracted directory to /opt</strong><br/><strong>sudo mv go /opt</strong><br/><strong># Update PATH environment variable to include Go's binaries</strong><br/><strong>echo "export PATH=$PATH:/opt/go/bin" &gt;&gt; ~/.bashrc</strong></pre>
<p>Now restart your Terminal for the changes to take effect. If you are using a shell other than Bash, you will need to update the proper RC file for your shell.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Go on other platforms</h1>
                
            
            
                
<p>If you are not using Ubuntu, you can still install Go easily. The Go website provides multiple installation formats on the Downloads page at <a href="https://golang.org/dl/">https://golang.org/dl/</a>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Other Linux distributions</h1>
                
            
            
                
<p>The first option is to use the package manager for the Linux distribution to install Go. Most major distributions have a package for Go. Names vary, so a web search may be necessary to get the exact package name. If there is no package available, you can simply download the precompiled Linux tarball and extract it. A good place to extract the contents is <kbd>/opt/go</kbd>. Then, add <kbd>/opt/go/bin</kbd> to your <kbd>PATH</kbd> environment variable the same way as described in the previous section.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Windows</h1>
                
            
            
                
<p>An official Windows installer is available, which makes installation as simple as running the installer. You may need to modify the environment variables and update your <kbd>%PATH%</kbd> variable. In Windows 10, this can be found by navigating to Control Panel | System | Advanced System Settings | Environment Variables.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Mac</h1>
                
            
            
                
<p>An official installer is also available for Mac. After running the installer, Go will be available in your <kbd>PATH</kbd> variable.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Setting up Go</h1>
                
            
            
                
<p>At this point, your environment should have Go installed and you should be able to run <kbd>go</kbd> executable from your Terminal window. The go program is how you access the Go toolchain. You can test it by running this command:</p>
<pre><strong>go help</strong></pre>
<p>Now we are ready to write a first Hello World program to ensure that our environment is fully functional. Before we start coding, though, we need to create a proper workspace.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating your workspace</h1>
                
            
            
                
<p>Go has a standard folder structure for a workspace. It is important to conform to certain standards for the Go toolchain to work properly. You can create a workspace directory anywhere you want and name it anything you like. For the lab environment, we will simply use the <kbd>Home</kbd> directory as the Go workspace. This means that source files will reside in <kbd>~/src</kbd>, packages will be built in <kbd>~/pkg</kbd>, and executables will be installed to <kbd>~/bin</kbd>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Setting up environment variables</h1>
                
            
            
                
<p>In order for most of the Go toolchain to work, the <kbd>GOPATH</kbd> environment variable must be set. The <kbd>GOPATH</kbd> specifies what directory you treat as your workspace. The <kbd>GOPATH</kbd> environment variable must be set before you can build packages. For more help and information, call the <kbd>go help</kbd> command in the Terminal by running this command:</p>
<pre><strong>go help gopath</strong></pre>
<p>We need to tell Go to treat our <kbd>home</kbd> directory as the workspace. This is done by setting the <kbd>GOPATH</kbd> environment variable. You can set <kbd>GOPATH</kbd> in three ways:</p>
<ul>
<li>The first way is to set it manually each time you run the <kbd>go</kbd> command. Consider this example:</li>
</ul>
<pre><strong>      GOPATH=$HOME go build hello</strong></pre>
<ul>
<li>You can also set the <kbd>GOPATH</kbd> variable so that it stays set until you close your Terminal and the environment variable is lost:</li>
</ul>
<pre><strong>      export GOPATH=$HOME</strong></pre>
<ul>
<li>The third option is to set the <kbd>GOPATH</kbd> environment variable permanently as follows:</li>
</ul>
<ol>
<li style="list-style-type: none">
<ol>
<li>Add it to your shell startup script, <kbd>.bashrc</kbd>. This will set the variable every time you start the Terminal.</li>
<li>Run this to ensure that <kbd>GOPATH</kbd> is set whenever you open future Terminal/shell sessions:</li>
</ol>
</li>
</ol>
<pre><strong>              echo "export GOPATH=$HOME" &gt;&gt; $HOME/.bashrc</strong></pre>
<ol>
<li style="list-style-type: none">
<ol start="3">
<li>Restart your Terminal for the changes to take effect. If you are using Zsh or an alternative shell, you will need to update the respective RC file.</li>
</ol>
</li>
</ol>
<p>Note that Go version 1.8 and greater do not require the <kbd>GOPATH</kbd> environment variable to be explicitly set. If no <kbd>GOPATH</kbd> is set, it will use <kbd>$HOME/go</kbd> as a default workspace.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Editors</h1>
                
            
            
                
<p>We're about to write our first program in our new <kbd>hello</kbd> directory. You will first need to choose which editor to use. Fortunately, working with Go does not require any special IDE or editor. The Go toolchain integrates easily into many editors and IDEs. Your options range from using a simple text editor, such as Notepad, to full-fledged IDEs dedicated to Go.</p>
<p>I recommend that you start with a simple text editor, such as nano or gedit, since these are included with Ubuntu, easy to use, and support syntax highlighting for Go out of the box. Feel free to choose another editor or IDE though.</p>
<p>Plugins exist for many text editors and IDEs to add Go support. For example, Visual Studio Code, Emacs, Sublime Text, JetBrains IntelliJ, Vim, Atom, NetBeans, and Eclipse all have Go plugins. There are a couple of Go-specific IDEs, namely JetBrains GoLand and LiteIDE, both of which are cross-platform.</p>
<p>Start with the <kbd>nano</kbd> or <kbd>gedit</kbd> command and explore other editors and IDEs after you are comfortable with Go. This book will not compare the editors or cover how to configure them.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating your first package</h1>
                
            
            
                
<p>Within the <kbd>~/src</kbd> directory, any directory you create is a package. The name of your directory becomes the name of the package or application. We need to first make sure that the <kbd>src</kbd> directory exists. Tilde (<kbd>~</kbd>) is a shortcut for your home directory similar to the <kbd>$HOME</kbd> variable. Refer to the following code block:</p>
<pre><strong>mkdir ~/src</strong></pre>
<p>Let's create a new package named <kbd>hello</kbd> for our first application:</p>
<pre class="mce-root"><strong>cd ~/src</strong><br/><strong>mkdir hello</strong></pre>
<p>A package is simply a directory. You can have one or more source files inside a package. Any subdirectories are treated as separate packages. A package can be an application with a <kbd>main()</kbd> function (<kbd>package main</kbd>), or it can be a library that can only be imported to other packages. This package doesn't have any files yet, but we'll write the first file in a moment. Don't worry too much about package structure for now. You can read more about package paths at <a href="https://golang.org/doc/code.html#PackagePaths">https://golang.org/doc/code.html#PackagePaths</a>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Writing your first program</h1>
                
            
            
                
<p>The simplest package you can have is a single file inside a directory. Create a new file, <kbd>~/src/hello/hello.go</kbd>, and put the following code inside:</p>
<pre>package main<br/><br/>import "fmt"<br/><br/>func main() {<br/>   fmt.Println("Hello, world.")<br/>}</pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Running the executable file</h1>
                
            
            
                
<p>The simplest way to execute a program is with the <kbd>go run</kbd> command. The following command will run the file without leaving behind an executable file:</p>
<pre><strong>go run ~/src/hello/hello.go</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Building the executable file</h1>
                
            
            
                
<p>To compile and build an executable file, use the <kbd>go build</kbd> command. When running <kbd>go build</kbd> you must pass a path to a package. The package path you provide is relative to <kbd>$GOPATH/src</kbd>. Since our package is in <kbd>~/src/hello</kbd>, we would run the command as follows:</p>
<pre><strong>go build hello</strong></pre>
<p>We can actually call <kbd>go build</kbd> from anywhere as long as we have a <kbd>$GOPATH</kbd> set. The executable binary that is created will be output in the current working directory. You can then run it with this command:</p>
<pre><strong>./hello</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing the executable file</h1>
                
            
            
                
<p>The <kbd>go build</kbd> tool is good for generating an executable file in your current working directory, but there is a way to build and install your applications so that the executables are all collected in the same location.</p>
<p>When you run <kbd>go install</kbd> it puts the output file in a default location of <kbd>$GOPATH/bin</kbd>. In our case, we set <kbd>$GOPATH</kbd> equal to our <kbd>$HOME</kbd>. So the default <kbd>bin</kbd> directory would be <kbd>$HOME/bin</kbd>.</p>
<p>You can override the location by setting the <kbd>GOBIN</kbd> environment variable if you want it to install somewhere else. To install our <kbd>hello</kbd> program, we will run the following command:</p>
<pre><strong>go install hello</strong></pre>
<p>This will build and create an executable file, <kbd>~/bin/hello</kbd>. The <kbd>bin</kbd> directory will get created automatically if it does not already exist. If you run the <kbd>install</kbd> command multiple times, it will rebuild and overwrite the executable in the <kbd>bin</kbd> directory. Then the application can be run with this:</p>
<pre><strong>~/bin/hello</strong></pre>
<p>You can add <kbd>~/bin</kbd> to your <kbd>PATH</kbd> environment variable for convenience. Doing so will allow you to run the applications from any working directory. To add the <kbd>bin</kbd> directory to your <kbd>PATH</kbd>, run this in the Terminal:</p>
<pre><strong>echo "export PATH=$PATH:$HOME/gospace/bin" &gt;&gt; ~/.bashrc</strong></pre>
<p>Be sure to restart your Terminal after that to refresh the environment variables. After that you can run the <kbd>hello</kbd> application by simply typing the following into the Terminal:</p>
<pre><strong>hello</strong></pre>
<p>Installing the application is completely optional. You don't have to install programs to run or build them. You can always build and run from your current working directory when developing, but it can be convenient to install finished applications that get used.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Formatting with go fmt</h1>
                
            
            
                
<p>The <kbd>go fmt</kbd> command is used to format source code files to meet Go formatting standards.</p>
<p>This will make sure that indentation is accurate and there are no excessive blank spaces, among other things. You can format a single Go source code file or a whole package at once. It is good practice to follow Go coding standards and run <kbd>go fmt</kbd> on your files so that you will have no doubt that your code follows the guidelines. Read more on formatting at <a href="https://golang.org/doc/effective_go.html#formatting">https://golang.org/doc/effective_go.html#formatting</a>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Running Go examples</h1>
                
            
            
                
<p>The examples provided in this book are all self-contained. Every example is a full program and can be run. Most examples are short and demonstrate one specific topic. While the examples can be used as standalone programs, some of them may have limited use. They are intended to be references and used like a cookbook for building your own projects. Because each example is a self-contained main package, you can use the <kbd>go build</kbd> command to get an executable and <kbd>go run</kbd> to run the file. Here are some more details about the various options for building and running programs.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Building a single Go file</h1>
                
            
            
                
<p>If you build a file, it will generate an executable named after the Go file. Run the following command:</p>
<pre><strong>go build example.go</strong></pre>
<p>This will give you an executable named example that could be executed like this:</p>
<pre><strong>./example</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Running a single Go file</h1>
                
            
            
                
<p>You don't have to build a file and get an executable if you only want to run it. The <kbd>go run</kbd> option allows you to run the <kbd>.go</kbd> file without leaving an executable behind. You can still pass in arguments as if it was a regular executable, like this:</p>
<pre><strong>go run example.go arg1 arg2</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Building multiple Go files</h1>
                
            
            
                
<p>If a program is split into multiple files, you can pass all of them to the <kbd>build</kbd> command. For example, if you have a <kbd>main.go</kbd> file and an <kbd>utility.go</kbd> file containing extra functions, you could build them by running the following command:</p>
<pre><strong>go build main.go utility.go</strong></pre>
<p>If you tried to build <kbd>main.go</kbd> by itself, it would not be able to find the references to the functions in <kbd>utility.go</kbd>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Building a folder (package)</h1>
                
            
            
                
<p>If a package contains multiple Go files that need to be built, it is tedious to pass each file to the <kbd>build</kbd> command. If you run <kbd>go build</kbd> with no arguments inside a folder, it will attempt to build all the <kbd>.go</kbd> files in the directory. If one of those files contains a <kbd>package main</kbd> statement at the top, it will generate an executable named after the directory name. If you write a program, it is possible to write a package that contains no main file and is used only as a library to be included in other projects.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing a program for use</h1>
                
            
            
                
<p>Installing a program is similar to building one but, instead of running <kbd>go build</kbd>, you run <kbd>go install</kbd>. You can run it inside a directory, pass it an absolute directory path, and pass it a directory path relative to the <kbd>$GOPATH</kbd> environment variable or on a file directly. Once a program has been installed, it goes into your <kbd>$GOBIN</kbd>, which you should have already set. You should have already added <kbd>$GOBIN</kbd> to your <kbd>$PATH</kbd> as well so that you can run the installed programs directly from your command line no matter what directory you are currently in. Installing is totally optional, but it is convenient for certain programs, especially for the ones you want to save or use frequently.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Summary</h1>
                
            
            
                
<p>After reading this chapter, you should have a general understanding of the Go programming language and some of its key features. You should also have a version of Go installed on your machine with your environment variables set up. If you need more instructions on installing and testing your environment, refer to the Go documentation at <a href="https://golang.org/doc/install">https://golang.org/doc/install</a>.</p>
<p>In the next chapter, we will look closer at the Go programming language, learning about the design, data types, keywords, features, control structures, and where to get help and find documentation. If you are already familiar with Go, it should be a good review to reinforce your foundational knowledge. If you are new to Go, it will serve as a primer to prepare you for the rest of the book.</p>


            

            
        
    </body></html>