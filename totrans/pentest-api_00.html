<html><head></head><body>
		<div><h1 id="_idParaDest-5"><a id="_idTextAnchor004"/>Preface</h1>
			<p>Welcome to <em class="italic">Pentesting APIs</em>! <strong class="bold">Application Programming Interfaces</strong> (<strong class="bold">APIs</strong>) are pervasive in the modern world we live in. It’s practically impossible to use a web, embedded, or mobile application without interacting with its API. Understanding its weaknesses is fundamental for a well-done invasion test. That’s what this book is all about.</p>
			<p>You will learn various aspects of APIs, beginning with a quick introduction to them and their history, going through basic and advanced attacks, exploring different code excerpts and techniques, and finishing with security recommendations on how to block or avoid such attacks. Hence, this book is divided into the following main sections:</p>
			<ul>
				<li>Recognizing and scanning API targets.</li>
				<li>Effectively attacking APIs.</li>
				<li>Learning recommendations on how to protect APIs from invasions.</li>
			</ul>
			<p>I will guide you through all the steps that are necessary to exercise professional pentesting against API targets. This is based on the following:</p>
			<ul>
				<li>My accumulated experience as an application security engineer, where I was responsible for reviewing various security aspects of applications before approving them for public release.</li>
				<li>My previous and current professional experiences with software development, especially on security software, such as keys and secrets management as well as identity management.</li>
			</ul>
			<p>Recent news highlights the growing importance of API security. In late 2022, a major social media platform suffered a data breach due to vulnerabilities in its API, exposing millions of user records. Similarly, in early 2023, a financial services company faced a significant security incident where hackers exploited API flaws to siphon off sensitive customer data. These incidents underscore the critical need for rigorous API pentesting to identify and mitigate vulnerabilities before they can be exploited by malicious actors.</p>
			<p>By comprehensively understanding and addressing API security, organizations can significantly enhance their defense against potential cyber threats. You are about to begin this fascinating journey.</p>
			<h1 id="_idParaDest-6"><a id="_idTextAnchor005"/>Who this book is for</h1>
			<p>Although pentesting APIs can be useful to junior and novice enthusiasts, it will be especially valuable to medium-level to experienced penetration testers, since you will preferably have a good foundation on cybersecurity concepts such as enumeration, discovery, and pentesting. Some knowledge about higher-level programming languages, such as Python and Golang, is also advised.</p>
			<p>With that being said, this book is for security engineers, analysts, application owners, developers, pentesters, and all enthusiasts who want to learn a bit more about APIs and successful ways of testing their robustness.</p>
			<h1 id="_idParaDest-7"><a id="_idTextAnchor006"/>What this book covers</h1>
			<p><a href="B19657_01.xhtml#_idTextAnchor014"><em class="italic">Chapter 1</em></a>, <em class="italic">Understanding APIs and their Security Landscape</em>, introduces you to APIs, their components, the role they play in contemporary applications, and how users commonly interact with them. Understanding the landscape of APIs will enable you to envisage the potential attack vectors.</p>
			<p><a href="B19657_02.xhtml#_idTextAnchor028"><em class="italic">Chapter 2</em></a>, <em class="italic">Setting Up the Penetration Testing Environment</em>, guides you toward the preparations and setup of the various pentest lab components. Some important decisions need to be made, such as the selection of tools and frameworks along with the development environment and some initial tests. If you are new to the pentesting arena, you will have the chance to get to know some relevant terminology and important software.</p>
			<p><a href="B19657_03.xhtml#_idTextAnchor042"><em class="italic">Chapter 3</em></a>, <em class="italic">API Reconnaissance and Information Gathering</em>, is the first chapter where you will start to play with APIs. Before effectively attacking an API endpoint, it is paramount to enumerate and recognize what is available. Some penetration tests are completely black boxes, meaning you will have absolutely no knowledge about what is running on the API’s side.</p>
			<p><a href="B19657_04.xhtml#_idTextAnchor056"><em class="italic">Chapter 4</em></a>, <em class="italic">Authentication and Authorization Testing</em>, covers aspects related to <strong class="bold">Authentication</strong> (<strong class="bold">AuthN</strong>) and <strong class="bold">Authorization</strong> (<strong class="bold">AuthZ</strong>) on applications, focusing on the ways APIs work with this. Then, after learning how apps control the access of their users, it is time for you to understand how they can be explored and eventually bypassed.</p>
			<p><a href="B19657_05.xhtml#_idTextAnchor078"><em class="italic">Chapter 5</em></a>, <em class="italic">Injection Attacks and Validation Testing</em>, teaches you how to test APIs against both SQL and NoSQL injections, and how such types of attacks could be mostly avoided by correctly validating user input.</p>
			<p><a href="B19657_06.xhtml#_idTextAnchor102"><em class="italic">Chapter 6</em></a>, <em class="italic">Error Handling and Exception Testing</em>, explains that applications do not always run as they were designed by their creators. Some unexpected behavior might occur either caused by the users themselves or by some internal error. You will learn how bad exception and error handling might bring to light valuable information as well as open exploitable breaches.</p>
			<p><a href="B19657_07.xhtml#_idTextAnchor110"><em class="italic">Chapter 7</em></a>, <em class="italic">Denial of Service and </em><em class="italic">Rate-Limitin</em><em class="italic">g Testing</em>, discusses pentesting by <strong class="bold">Denial of Service</strong> (<strong class="bold">DoS</strong>) and its “distributed” variation. These are some of the biggest attacks carried out on the internet. You will understand how to test targets with DoS and identify rate-limiting mechanisms, as well as how to circumvent them.</p>
			<p><a href="B19657_08.xhtml#_idTextAnchor131"><em class="italic">Chapter 8</em></a>, <em class="italic">Data Exposure and Sensitive Information Leakage</em>, introduced you to one of the most dangerous threats to APIs, according to OWASP’s Top 10 API. You will learn how to identify data exposure and leakage and leverage them to take advantage of their penetration tests against APIs.</p>
			<p><a href="B19657_09.xhtml#_idTextAnchor141"><em class="italic">Chapter 9</em></a>, <em class="italic">API Abuse and Business Logic Testing</em>, explains that knowing the logic behind API implementations can be quite useful for abusing them. You will learn that there are some strategies to leverage them for pentesting as well as approaches to avoid falling victim to such threats.</p>
			<p><a href="B19657_10.xhtml#_idTextAnchor153"><em class="italic">Chapter 10</em></a>, <em class="italic">Secure Coding Practices for APIs</em>, discusses topics that every software developer, whether or not they are creating an API, should be aware of. You will learn about established secure coding approaches and standards, as well as some advice on how to avoid many of the attacks discussed in the book.</p>
			<h1 id="_idParaDest-8"><a id="_idTextAnchor007"/>To get the most out of this book</h1>
			<p>You will have to know how to work with virtual machines, preferably using Linux guests.</p>
			<table id="table001" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="bold">Software/hardware covered in </strong><strong class="bold">the book</strong></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold">Operating </strong><strong class="bold">system requirements</strong></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>VirtualBox</p>
						</td>
						<td class="No-Table-Style">
							<p>Linux</p>
						</td>
					</tr>
				</tbody>
			</table>
			<h1 id="_idParaDest-9"><a id="_idTextAnchor008"/>Download the example code files</h1>
			<p>You can download the example code files for this book from GitHub at <a href="https://github.com/PacktPublishing/Pentesting-APIs">https://github.com/PacktPublishing/Pentesting-APIs</a>. If there’s an update to the code, it will be updated in the GitHub repository.</p>
			<p>We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing/">https://github.com/PacktPublishing/</a>. Check them out!</p>
			<h1 id="_idParaDest-10"><a id="_idTextAnchor009"/>Conventions used</h1>
			<p>There are a number of text conventions used throughout this book.</p>
			<p><code>Code in text</code>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. Here is an example: “Inside the header, some attributes can be declared, such as <code>env:role</code>, <code>env:mustUnderstand</code>, and <code>env:relay</code>.”</p>
			<p>A block of code is set as follows:</p>
			<pre class="source-code">
&lt;env:Header&gt;
  &lt;BA:BlockA 
   env:role="http://mysoap.com/role/A" env:mustUnderstand="true"&gt;
   ...
  &lt;/BA:BlockA&gt;
  &lt;BB:BlockB 
   env:role="http://mysoap.com/role/B" env:relay="true"&gt;
    ...
  &lt;/BB:BlockB&gt;
&lt;/env:Header&gt;</pre>			<p>When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p>
			<pre class="source-code">
{"jsonrpc": "2.0", "method": "IsStudent", "params": [100], "id": 1}
{"jsonrpc": "2.0", "result": true, "id": 1}
<strong class="bold">{"jsonrpc": "2.0", "method": "IsStudent", "params": ["ABC"], "id": 2}</strong>
<strong class="bold">{"jsonrpc": "2.0", "error": {"code": -1, "message": "Invalid enrollment id format"}, "id": 2}</strong></pre>			<p>Any command-line input or output is written as follows:</p>
			<pre class="console">
$ sudo apt update &amp;&amp; sudo apt install curl</pre>			<p><strong class="bold">Bold</strong>: Indicates a new term, an important word, or words that you see onscreen. For instance, words in menus or dialog boxes appear in <strong class="bold">bold</strong>. Here is an example: “Select <strong class="bold">Next</strong> and you’ll be asked in which directory you’d like it to be installed. “</p>
			<p class="callout-heading">Tips or important notes</p>
			<p class="callout">Appear like this.</p>
			<h1 id="_idParaDest-11"><a id="_idTextAnchor010"/>Get in touch</h1>
			<p>Feedback from our readers is always welcome.</p>
			<p><strong class="bold">General feedback</strong>: If you have questions about any aspect of this book, email us at <a href="mailto:customercare@packtpub.com">customercare@packtpub.com</a> and mention the book title in the subject of your message.</p>
			<p><strong class="bold">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you would report this to us. Please visit <a href="http://www.packtpub.com/support/errata">www.packtpub.com/support/errata</a> and fill in the form.</p>
			<p><strong class="bold">Piracy</strong>: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <a href="mailto:copyright@packt.com">copyright@packt.com</a> with a link to the material.</p>
			<p><strong class="bold">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com">authors.packtpub.com</a>.</p>
			<h1 id="_idParaDest-12"><a id="_idTextAnchor011"/>Share Your Thoughts</h1>
			<p>Once you’ve read <em class="italic">Pentesting APIs</em>, we’d love to hear your thoughts! Please <a href="https://packt.link/r/1-837-63316-9">click here to go straight to the Amazon review page</a> for this book and share your feedback.</p>
			<p>Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content.</p>
			<h1 id="_idParaDest-13"><a id="_idTextAnchor012"/>Download a free PDF copy of this book</h1>
			<p>Thanks for purchasing this book!</p>
			<p>Do you like to read on the go but are unable to carry your print books everywhere?</p>
			<p>Is your eBook purchase not compatible with the device of your choice?</p>
			<p>Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at no cost.</p>
			<p>Read anywhere, any place, on any device. Search, copy, and paste code from your favorite technical books directly into your application. </p>
			<p>The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your inbox daily</p>
			<p>Follow these simple steps to get the benefits:</p>
			<ol>
				<li>Scan the QR code or visit the link below</li>
			</ol>
			<div><div><img src="img/B19657_QR_Free_PDF.jpg" alt="" role="presentation"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a href="https://packt.link/free-ebook/978-1-83763-316-6">https://packt.link/free-ebook/978-1-83763-316-6</a></p>
			<ol>
				<li value="2">Submit your proof of purchase</li>
				<li>That’s it! We’ll send your free PDF and other benefits to your email directly</li>
			</ol>
		</div>
	

		<div><h1 id="_idParaDest-14" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor013"/>Part 1: Introduction to API Security</h1>
			<p>In this part, you will be introduced to the world of APIs, learn their history, get acquainted with some types of APIs, and understand the importance of protecting APIs. You will also learn about some common vulnerabilities that might affect them. Finally, you will be taught how to prepare your pentesting lab environment, with tips on tools and access to the book’s code repository.</p>
			<p>This section contains the following chapters:</p>
			<ul>
				<li><a href="B19657_01.xhtml#_idTextAnchor014"><em class="italic">Chapter 1</em></a>, <em class="italic">Understanding APIs and </em><em class="italic">their</em><em class="italic"> Security Landscape</em></li>
				<li><a href="B19657_02.xhtml#_idTextAnchor028"><em class="italic">Chapter 2</em></a>, <em class="italic">Setting Up the Penetration Testing Environment</em></li>
			</ul>
		</div>
		<div><div></div>
		</div>
		<div><div></div>
		</div>
	</body></html>