["```\n    New-AzResourceGroup -Name \"Packt-Security\" -Location ` \"westeurope\"\n    ```", "```\n    New-AzVirtualNetwork -Name \"Packt-VNet\" -ResourceGroupName ` \"Packt-Security\" -Location  \"westeurope\" -AddressPrefix ` 10.11.0.0/16\n    ```", "```\n    $nsg=Get-AzNetworkSecurityGroup -Name 'nsg1' `\n    -ResourceGroupName 'Packt-Security'\n    $nsg | Add-AzNetworkSecurityRuleConfig -Name 'Allow_HTTPS' `\n    -Description 'Allow_HTTPS' -Access Allow -Protocol Tcp `\n    -Direction Inbound -Priority 100 -SourceAddressPrefix Internet `\n    -SourcePortRange * -DestinationAddressPrefix * `\n    -DestinationPortRange 443 | Set-AzNetworkSecurityGroup \n    ```", "```\n$nsg | Add-AzNetworkSecurityRuleConfig -Name 'Allow_SSH' `\n-Description 'Allow_SSH' `\n-Access Allow -Protocol Tcp `\n-Direction Outbound -Priority 100 `\n-SourceAddressPrefix VirtualNetwork  -SourcePortRange * `\n-DestinationAddressPrefix * -DestinationPortRange 22 `\n| Set-AzNetworkSecurityGroup \n```", "```\n$vnet = Get-AzVirtualNetwork -Name 'Packt-VNet' `\n-ResourceGroupName 'Packt-Security'\nAdd-AzVirtualNetworkSubnetConfig -Name FrontEnd `\n-AddressPrefix 10.11.0.0/24 -VirtualNetwork $vnet\n$subnet = Get-AzVirtualNetworkSubnetConfig `\n-VirtualNetwork $vnet -Name FrontEnd\n$nsg = Get-AzNetworkSecurityGroup `\n-ResourceGroupName 'Packt-Security' -Name 'nsg1'\n$subnet.NetworkSecurityGroup = $nsg\nSet-AzVirtualNetwork -VirtualNetwork $vnet \n```", "```\n    $FWsub = New-AzVirtualNetworkSubnetConfig -Name ` AzureFirewallSubnet -AddressPrefix 10.0.1.0/26\n    $Worksub = New-AzVirtualNetworkSubnetConfig -Name Workload-SN ` -AddressPrefix 10.0.2.0/24\n    $Jumpsub = New-AzVirtualNetworkSubnetConfig -Name Jump-SN `  \n    -AddressPrefix 10.0.3.0/24 \n    $testVnet = New-AzVirtualNetwork -Name Packt-VNet `\n    -ResourceGroupName Packt-Security -Location \"westeurope\" `\n    -AddressPrefix 10.0.0.0/16 -Subnet $FWsub, $Worksub, $Jumpsub \n    ```", "```\n    New-AzVm -ResourceGroupName Packt-Security -Name \"Srv-Jump\" `\n    -Location \"westeurope\" -VirtualNetworkName Packt-VNet `\n    -SubnetName Jump-SN -OpenPorts 3389 -Size \"Standard_DS2\" \n    ```", "```\n    $NIC = New-AzNetworkInterface -Name Srv-work `\n    -ResourceGroupName Packt-Security -Location \"westeurope\" `\n    -Subnetid $testVnet.Subnets[1].Id\n    $VirtualMachine = New-AzVMConfig -VMName Srv-Work -VMSize ` \"Standard_DS2\"\n    $VirtualMachine = Set-AzVMOperatingSystem -VM $VirtualMachine `\n    -Windows -ComputerName Srv-Work -ProvisionVMAgent `\n    -EnableAutoUpdate\n    $VirtualMachine = Add-AzVMNetworkInterface -VM $VirtualMachine ` -Id $NIC.Id\n    $VirtualMachine = Set-AzVMSourceImage -VM $VirtualMachine `\n    -PublisherName 'MicrosoftWindowsServer' -Offer 'WindowsServer' ` -Skus '2016-Datacenter' -Version latest\n    New-AzVM -ResourceGroupName Packt-Security -Location ` \"westeurope\" -VM $VirtualMachine -Verbose \n    ```", "```\n    $FWpip = New-AzPublicIpAddress -Name \"fw-pip\" `\n    -ResourceGroupName  Packt-Security -Location \"westeurope\" `\n    -AllocationMethod Static -Sku Standard\n    $Azfw = New-AzFirewall -Name Test-FW01 -ResourceGroupName `\n    Packt-Security -Location \"westeurope\" -VirtualNetworkName ` Packt-VNet -PublicIpName fw-pip\n    $AzfwPrivateIP = $Azfw.IpConfigurations.privateipaddress \n    ```", "```\n    $routeTableDG = New-AzRouteTable -Name Firewall-rt-table `\n    -ResourceGroupName Packt-Security -location \"westeurope\" `\n    -DisableBgpRoutePropagation\n    Add-AzRouteConfig -Name \"DG-Route\" -RouteTable $routeTableDG `\n    -AddressPrefix 0.0.0.0/0 -NextHopType \"VirtualAppliance\" `\n    -NextHopIpAddress $AzfwPrivateIP | Set-AzRouteTable\n    Set-AzVirtualNetworkSubnetConfig -VirtualNetwork $testVnet `\n    -Name Workload-SN -AddressPrefix 10.0.2.0/24 `\n    -RouteTable $routeTableDG | Set-AzVirtualNetwork \n    ```", "```\n    $AppRule1 = New-AzFirewallApplicationRule -Name Allow-Google `\n    -SourceAddress 10.0.2.0/24 -Protocol http, https `\n    -TargetFqdn www.google.com\n    $AppRuleCollection = New-AzFirewallApplicationRuleCollection `\n    -Name App-Coll01 -Priority 200 -ActionType Allow -Rule $AppRule1\n    $Azfw.ApplicationRuleCollections = $AppRuleCollection\n    Set-AzFirewall -AzureFirewall $Azfw \n    ```", "```\n    $NetRule1 = New-AzFirewallNetworkRule -Name \"Allow-DNS\" `\n    -Protocol UDP -SourceAddress 10.0.2.0/24 `\n    -DestinationAddress 209.244.0.3,209.244.0.4 -DestinationPort 53\n    $NetRuleCollection = New-AzFirewallNetworkRuleCollection `\n    -Name RCNet01 -Priority 200 -Rule $NetRule1 -ActionType \"Allow\"\n    $Azfw.NetworkRuleCollections = $NetRuleCollection\n    Set-AzFirewall -AzureFirewall $Azfw \n    ```", "```\n    $NIC.DnsSettings.DnsServers.Add(\"209.244.0.3\")\n    $NIC.DnsSettings.DnsServers.Add(\"209.244.0.4\")\n    $NIC | Set-AzNetworkInterface\n    ```"]