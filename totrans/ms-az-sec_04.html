<html><head></head><body>
		<div><h1 id="_idParaDest-54"><em class="italic">Chapter 3</em>: <a id="_idTextAnchor060"/>Managing Cloud Identities</h1>
			<p>Back in the days when IT security was synonymous with blocking network traffic, life was easy. You could be sure that your physical walls built your perimeter, so you simply needed to protect your borders. However, today, your network endpoints are no longer enough to secure your perimeter. Today, we see an increasing amount of phishing and credential theft attacks against corporate environments. We're in an age where corporate data is moving out of its secure enterprise network environment. It's the age of cloud services such as Office 365, and so traditional security strategies aren't enough to safeguard data as the data is outside secure walls. We need a new approach to add on top of the traditional approach. This new approach is "identity is the new perimeter." This makes identity something we need to protect more than ever before. Of course, this does not mean that we have to do away with the old method of protecting the network, and we'll explore this in <a href="B15414_04_Final_JM_ePub.xhtml#_idTextAnchor087"><em class="italic">Chapter 4</em></a>, <em class="italic">Network Security</em>.</p>
			<p>In general, to avoid random attacks, you need to raise the bar and make an attack attempt as expensive as possible for an attacker. It's just like protecting your home: if you secure your front door with a higher <strong class="bold">resistance class</strong> (<strong class="bold">RC</strong>), have grids in front of your windows, an automated lighting <a id="_idIndexMarker116"/>system to light up your property, and your neighbor does not, then burglars looking for random targets will most probably not even try to attack your home. This is because an attack attempt against your home would probably be too time consuming, or the probability of being detected is too high; thus, it would be too expensive from an attacker's point of view. This does not work if you are suffering a sophisticated attack that is planned and targeted against your home or identities (there is no absolute security!), but it helps against all the random attack attempts out in the wild.</p>
			<p>In this chapter, we will not only cover strategies to protect your identities, but you will also learn how to reduce the attack surface of your privileged accounts. The topics we will cover are the following:</p>
			<ul>
				<li>Exploring passwords and passphrases</li>
				<li>Understanding <strong class="bold">multi-factor authentication (MFA)</strong></li>
				<li>Using Conditional Access</li>
				<li>Introducing <strong class="bold">Azure Active Directory</strong> <strong class="bold">(Azure AD) </strong>Identity Protection</li>
				<li>Understanding <strong class="bold">role-based access control (RBAC)</strong></li>
				<li>Protecting admin accounts with Azure AD <strong class="bold">Privileged Identity Management (PIM)</strong></li>
				<li>Hybrid authentication and <strong class="bold">Single Sign-On (SSO)</strong></li>
				<li>Understanding passwordless authentication</li>
				<li>Licensing considerations</li>
			</ul>
			<h1 id="_idParaDest-55"><a id="_idTextAnchor061"/>Exploring passwords and passphrases </h1>
			<p>When talking about identity security, there is one principle you always have to keep in mind: <em class="italic">assume breach</em>. The question is not <em class="italic">whether your accounts are attacked</em> but <em class="italic">whether you know about it</em> and <em class="italic">whether you can prevent attackers from being successful</em>. We can already see that there are many successful attacks <a id="_idIndexMarker117"/>against cloud identities every day. There is no single solution for <a id="_idIndexMarker118"/>protecting your identities, but you need to leverage a broader toolset to be resilient against identity attacks.</p>
			<p class="callout-heading">Important Note </p>
			<p class="callout">The question is not whether your cloud identities are under attack but whether you can make sure that attackers are not successful.</p>
			<p>If we start with passwords, you could say that no one likes them. Well, attackers do, because they often give <a id="_idIndexMarker119"/>attackers leverage for a following <strong class="bold">identity-focused attack</strong> attempt. Given the fact that people tend to create their passwords based on their life experiences, an attacker generally needs to be good at gathering background information about a specific user to guess their password. This, of course, means some effort on the attacker's side, and this would most probably be executed in a sophisticated attack against a high-value target. You can see that passwords are not a good solution for protecting your accounts.</p>
			<p>Furthermore, passwords <a id="_idIndexMarker120"/>can lead to <strong class="bold">denial of service</strong> (<strong class="bold">DoS</strong>). In <strong class="bold">Active Directory Domain Services (AD DS)</strong> on Windows Server, lots of companies use a respective security policy that will lock out user accounts for a given time (or infinitely) after a given number of <a id="_idIndexMarker121"/>failed login attempts. The problem is that authenticated users—that is, users that have been able to log into Active Directory — are able to read this security policy, and they are able to list user accounts from AD. An authenticated user can be any employee (internal attacker), or someone who is trying to attack a company from outside and who was able to get access to a set of login credentials (external attacker). Leveraging PowerShell, an attacker can easily:</p>
			<ul>
				<li>Find out what security policy is in place</li>
				<li>List all user accounts</li>
				<li>Lock all user accounts by trying to log in with incorrect passwords</li>
				<li>Repeat this script every <em class="italic">x </em>number of minutes.</li>
			</ul>
			<p>If someone does so, no one in this directory will be able to log in again, so the company will suffer a DoS. That said, you should <em class="italic">not</em> implement this lockout policy but monitor login attempts instead, and then make educated decisions if something unusual happens. Keep an eye on your security event logs on Windows servers or the syslog/auth log domain on Linux.</p>
			<h2 id="_idParaDest-56"><a id="_idTextAnchor062"/>Dictionary attacks and password protection</h2>
			<p>Dictionary attacks, such as <a id="_idIndexMarker122"/>brute-force and password spray attacks, still find success <a id="_idIndexMarker123"/>every day. In a dictionary attack, attackers try combinations of usernames and well-known and often-used passwords against an authentication service. The brute-force attack is more noisy and easier to recognize. With brute force, an attacker will try lots of passwords for a single user account, hoping that one of the attacks will be successful. In the backend, you will see lots of failed login attempts, so you can easily react to it. However, a password spray attack is way more sensitive since an attacker will only use a small set of passwords against lots of user accounts. If the attacks are very slow and widely distributed, it is very hard to notice an attack. To avoid successful password spray and brute-force attacks in the cloud and, to be more precise, in Azure AD, there are some easy best practices:</p>
			<ul>
				<li>Encourage your users to use passphrases instead of passwords</li>
				<li>Block passwords or patterns that should not be used in your environment</li>
			</ul>
			<p>Currently, you can use passwords or passphrases with up to 256 (!) characters in Azure AD. Even if you were to only <a id="_idIndexMarker124"/>use all 26 letters from the alphabet in uppercase and lowercase, this would mean (2x26)²⁵⁶ 256 possibilities, which results in a number near infinity.</p>
			<p>That said, and knowing that you cannot only use uppercase and lowercase letters, but also numbers and other characters <a id="_idIndexMarker125"/>in a passphrase, it makes a whole lot of combinations. You see, you should definitely enable and encourage your users to use passphrases with a lot of letters.</p>
			<p>For passwords you do not want to allow in your organization, there is another option you can enable. By default, Microsoft does not allow you to use passwords or password patterns that can be found on password lists and that are known to be used in dictionary attacks. For example, a pattern that is not allowed is your username, or any part of it. In addition to that, it might make sense for your company to avoid passwords that are easily relatable to your enterprise. This could be well-known marketing phrases, corporate abbreviations, and so on. In Azure AD, there is an option to create a custom banned password list that can be used to either audit or enforce the usage of secure passwords. You can even use this custom list to enable password protection for your on-premises Windows Server AD by installing and enabling an on-premises agent.</p>
			<p>The custom banned password list can contain up to 1,000 case-sensitive terms between 4 and 16 characters in length. One nice feature is the fact that character substitution such as "e" and "3" or "o" and "0" is considered.</p>
			<div><div><img src="img/Fig._3.1.jpg" alt="Figure. 3.1 - Configuration of a custom banned password list in Azure AD&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.1 - Configuration of a custom banned password list in Azure AD</p>
			<p>In order to configure a custom banned password list, you need to navigate to <strong class="bold">Azure Active Directory</strong> -&gt; <strong class="bold">Authentication methods</strong> -&gt; <strong class="bold">Password protection</strong> in the Azure portal, as seen in <em class="italic">Fig. 3.1.</em> On that screen, you'll also find configuration options for the <strong class="bold">Custom smart lockout</strong> feature. As mentioned before, you might find an on-premises AD security policy forcing accounts to be locked after <a id="_idIndexMarker126"/>a given number of failed login attempts. This is kind of an on/off decision and you can easily increment the lockout counter with the same password to force account lockouts. Remember that this is why you should disable such policies in your on-premises AD <a id="_idIndexMarker127"/>and monitor login attempts instead.</p>
			<p>However, in Azure AD, smart lockout is the feature that combines the best of two worlds: letting users work without blocking them unnecessarily and preventing attackers from guessing your passwords at the same time. To achieve that goal, smart lockout comes with some interesting features:</p>
			<ul>
				<li>Users are not meant to be blocked from working. Smart lockout recognizes attack attempts and login attempts from valid users. Attack attempts are treated differently, so legitimate users are still able to work while attackers are blocked.</li>
				<li>Smart lockout stores the last three bad password hashes. Doing so, you cannot simply use the lockout counter to enforce DoS by using the same bad password several times.</li>
				<li>The default lockout threshold is 10 bad attempts with a lockout duration of 60 seconds. Smart lockout is always on for Azure AD; however, it does not guarantee that legitimate user accounts are never locked out. The service uses familiar versus unfamiliar locations to try to figure out whether a login attempt comes from a bad actor or a genuine user. However, there is still a probability that users will be blocked from logging in. And one important point is that the service does not necessarily protect you from highly sensitive password spray attacks. This is not because the service is bad but because those kinds of attacks can become really difficult to discover.</li>
				<li>Imagine an attacker has a list of nine passwords and they use a widely spread network of bots to attack thousands <a id="_idIndexMarker128"/>of user accounts in one custom domain over a time frame of weeks. In that situation, there are some facts to realize:<p>The number of login attempts per user account will not exceed the default threshold.</p><p>By using several widely spread host systems to run the attack, it is hard to discover whether a login attempt is valid or malicious. However, Microsoft will also take into account whether a login attempt comes from a known bad IP address or an unfamiliar location.</p></li>
			</ul>
			<p>So, in this scenario, the service will probably not block an attacker. Of course, the nine passwords in the list need to <a id="_idIndexMarker129"/>be quite sophisticated to be accepted. However, there is still a probability of an attacker being successful at guessing your passwords.</p>
			<p>Now that you know why passwords are not enough to protect your accounts, let's move one step further and see how MFA can give an additional layer of security to your accounts.</p>
			<h1 id="_idParaDest-57"><a id="_idTextAnchor063"/>Understanding Multi-Factor Authentication (MFA)</h1>
			<p>There are only a few technical features that protect your accounts more than using MFA. With MFA, it is not enough <a id="_idIndexMarker130"/>to know a username and a password; you are also challenged to prove who you are using another authentication factor. With MFA, you generally need to be able to log in with:</p>
			<ul>
				<li>Something you are, such as your user account name or a biometrical attribute</li>
				<li>Something you know, such as a password</li>
				<li>Something you have, such as an additional authentication factor (smartcard, smartphone app, or security key).</li>
			</ul>
			<p>Given the fact that an MFA challenge is only triggered after a successful login attempt, it is still reliant on passphrases that are not easy to guess. In other words: if an MFA challenge is triggered, the respective username/password combination has already been successfully validated. </p>
			<div><div><img src="img/Fig._3.2.jpg" alt="Figure. 3.2 - An MFA challenge is triggered after the user's credentials have successfully been validated&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.2 - An MFA challenge is triggered after the user's credentials have successfully been validated</p>
			<p>Today, there <a id="_idIndexMarker131"/>are several options for using MFA in Azure AD:</p>
			<ul>
				<li>A push message from the Microsoft Authenticator smartphone app</li>
				<li>A <strong class="bold">one-time password</strong> (<strong class="bold">OTP</strong>) from the Microsoft Authenticator smartphone app</li>
				<li>A text <a id="_idIndexMarker132"/>message with an OTP sent to your mobile device</li>
				<li>A phone call to an authentication phone</li>
				<li>A security key or token</li>
			</ul>
			<p>If you have set up MFA the right way, you can literally react to all situations with a combination of these options. If you do not have access to mobile data or Wi-Fi, you can use the OTP code from a text message or from your smartphone app. If you leave your smartphone at home, you can get a call to your office phone (or another authentication phone you defined during the configuration process). </p>
			<p class="callout-heading">Important Note</p>
			<p class="callout">Important to note is the fact that you should not use your mobile phone number as your authentication phone because of obvious reasons. If you lose your phone or leave it at home, there won't be many options left.</p>
			<p>In <a href="B15414_02_Final_JM_ePub.xhtml#_idTextAnchor038"><em class="italic">Chapter 2</em></a>, <em class="italic">Governance and Security</em>, you learned about the segregation of duties and the principle of least privilege. Accounts only get the access rights they really need to fulfill a task. However, it is important to prevent being accidentally locked out from your Azure AD environment. So, there is still a need for accounts with higher privileges, such as subscription owner or Global Administrator access. This is why you need to create at least two administrative emergency access accounts. Some of these emergency access or <em class="italic">break glass</em> accounts need to be protected with MFA, too. Now, a single smartphone does not seem to be a good option for these kinds of accounts, because, according to Murphy's law, something will go wrong; the smartphone's owner is always on holiday, ill, or not available because of other reasons when you need them. A good thing to know is that <a id="_idIndexMarker133"/>you can have up to five authentication factors connected to a single account. For example, you could associate three security keys, one smartphone app, and a phone number with one account to make sure that there will always be at least one method you can use to fulfill an MFA challenge.</p>
			<h2 id="_idParaDest-58"><a id="_idTextAnchor064"/>MFA activation in Azure AD</h2>
			<p>From an <a id="_idIndexMarker134"/>administrator's perspective, activation <a id="_idIndexMarker135"/>of MFA in Azure AD is pretty straightforward:</p>
			<ol>
				<li value="1">In the Azure portal, navigate to <strong class="bold">Azure Active Directory</strong> and select the <strong class="bold">Users</strong> navigation pane. In the upper-right corner, navigate to <strong class="bold">•••More</strong> and then select <strong class="bold">Multi-Factor Authentication</strong>, as shown in the following screenshot:<div><img src="img/Fig._3.3.jpg" alt="Figure. 3.3 - MFA activation in the Azure portal&#13;&#10;"/></div><p class="figure-caption">Figure. 3.3 - MFA activation in the Azure portal</p><p>You will be redirected to a retro-style portal at the <a href="http://windowsazure.com">windowsazure.com</a> domain, in which you can enable or disable MFA for single users or bulk-update them by selecting several accounts or using a CSV file in the <strong class="bold">users</strong> tab.</p></li>
				<li>Before you enable MFA for user accounts, first switch from the <strong class="bold">users </strong>tab to the <strong class="bold">service settings</strong> tab to configure some custom settings for your environment, as shown in the following screenshot:<div><img src="img/Fig._3.4.jpg" alt="Figure. 3.4 - MFA - service settings&#13;&#10;"/></div><p class="figure-caption">Figure. 3.4 - MFA - service settings</p><p>The first option is to allow or disallow users to create app passwords for legacy non-browser apps that <a id="_idIndexMarker136"/>do not support MFA. Outlook used to be such an application; however, nowadays, most applications should be able to authenticate with MFA.</p><p>You can also <a id="_idIndexMarker137"/>define trusted IPs for which you can skip MFA. So, for example, if your users are authenticating from one of your corporate offices and you have defined your external IP range(s) here, you can define that MFA challenges are only triggered when someone wants to authenticate from outside your corporate buildings. You can also enable and disable single verification options if they do not fit your company's needs. The last setting is to allow users to remember MFA for devices they (but not you as a company!) trust. If you enable that option, users are not prompted with an MFA challenge again for a given period of time (between 1 and 60 days) on a particular device.</p></li>
				<li>Now, back to enabling user accounts for MFA on the <strong class="bold">users</strong> tab. When you click the <strong class="bold">Enable</strong> link on the <a id="_idIndexMarker138"/>right side after selecting one or several user accounts, you are prompted to read the online deployment guide and then click on <strong class="bold">enable multi-factor auth</strong>. That's all from an administrator's point of view. Pretty easy? Indeed.</li>
			</ol>
			<div><div><img src="img/Fig._3.5.jpg" alt="Figure. 3.5 - Enabling MFA for one or several user accounts&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.5 - Enabling MFA for one or several user accounts</p>
			<p>The MFA-activated <a id="_idIndexMarker139"/>user has to configure all individual settings after the next login attempt. Telephone numbers for the account are taken from the information that is already stored in Azure AD. However, the user can update these numbers in the wizard that appears after the next logon.</p>
			<h2 id="_idParaDest-59"><a id="_idTextAnchor065"/>MFA activation from a user's perspective</h2>
			<p>After enforcing <a id="_idIndexMarker140"/>MFA for John, a <a id="_idIndexMarker141"/>new window will appear after his next successful login, telling him that his organization needs more information to protect his account, as shown in the following screenshot:</p>
			<div><div><img src="img/Fig._3.6.jpg" alt="Figure. 3.6 - New window at the first login after MFA activation&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.6 - New window at the first login after MFA activation</p>
			<p>John now only has two options: <strong class="bold">Use a different account</strong> to log in or click <strong class="bold">Next</strong> to proceed through the MFA activation process. That said, you should inform your users before activating MFA to let them <a id="_idIndexMarker142"/>know what's going to happen and to reduce the amount of support tickets required!</p>
			<p>Let's look <a id="_idIndexMarker143"/>at what happens if John decides to complete the process:</p>
			<p>John decides to proceed and clicks the <strong class="bold">Next</strong> button. On the following screen, he can decide which is going to be his primary authentication option. John's office phone number is already filled from the information stored in his Azure AD user account, and he cannot change it. The authentication phone number, however, can be individually configured.</p>
			<div><div><img src="img/Fig._3.7.jpg" alt="Figure. 3.7 - Office phone numbers cannot be individually changed but are filled from the values stored in the Azure AD user account&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.7 - Office phone numbers cannot be individually changed but are filled from the values stored in the Azure AD user account</p>
			<p>If John decides to use the authentication phone as his primary MFA option, he has to configure the number and <a id="_idIndexMarker144"/>then decide whether he wants to receive a phone call or a text message containing an OTP:</p>
			<div><div><img src="img/Fig._3.8.jpg" alt="Figure. 3.8 - Authentication phone - individually configure the number and select the contact method&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.8 - Authentication phone - individually configure the number and select the contact method</p>
			<p>The third <a id="_idIndexMarker145"/>option is for John to use the Microsoft Authenticator app, which is available for all major smartphone operating systems in their respective app store. Here, again, he has two options to select from: either being informed by a push notification or using the verification code from the app, which is an OTP that changes every 30 seconds.</p>
			<div><div><img src="img/Fig._3.9.jpg" alt="Figure. 3.9 - Mobile app - select the primary MFA verification option&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.9 - Mobile app - select the primary MFA verification option</p>
			<p>John decides <a id="_idIndexMarker146"/>to use the mobile <a id="_idIndexMarker147"/>app and so has to click on the <strong class="bold">Set up</strong> button. He has already installed the Microsoft Authenticator app on his smartphone, so he can now easily proceed. A new window <a id="_idIndexMarker148"/>opens that shows John a <strong class="bold">Quick Response (QR)</strong> code to scan with the mobile app, as shown in the following screenshot:</p>
			<div><div><img src="img/Fig._3.10.jpg" alt="Figure. 3.10 - Mobile app configuration window &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.10 - Mobile app configuration window </p>
			<p>In his app, John clicks the <strong class="bold">+</strong> symbol and selects the option to add a new <strong class="bold">work or school account</strong>. With the QR code scanner that opens in the smartphone app, John scans the code from his screen and will <a id="_idIndexMarker149"/>immediately find his account <a id="_idIndexMarker150"/>added to the app's account list, as shown in the following screenshot:</p>
			<div><div><img src="img/Fig._3.11.jpg" alt="Figure. 3.11 - John's account has been added to the account list in his smartphone app&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.11 - John's account has been added to the account list in his smartphone app</p>
			<p>On his computer, John clicks <strong class="bold">Next</strong> so the app and the backend service are synchronized. The <strong class="bold">configure mobile app</strong> window will disappear again and John is then able to click the <strong class="bold">Next</strong> button. A push notification to the smartphone app is triggered, which can then be approved or declined, as shown in the following screenshot:</p>
			<div><div><img src="img/Fig._3.12.jpg" alt="Figure. 3.12 - Push notification in the Microsoft Authenticator app&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.12 - Push notification in the Microsoft Authenticator app</p>
			<p>Next, John is asked to enter his authentication phone number so Microsoft can make sure that John can authenticate logins even when he loses access to the mobile app. </p>
			<p><em class="italic">Step 4</em> then presents <a id="_idIndexMarker151"/>John with the app password he needs to use instead of his own user account password. In applications that do not support phone-based MFA today, this password is only shown once, so users need to copy and store it so it can be used when needed. If the app password is not stored safely, users can create <a id="_idIndexMarker152"/>new app passwords later, but then again, the respective password is only shown once during creation. After that, the MFA configuration is finished, and John will be logged off. When he logs on again, John will have to accept the MFA challenge.</p>
			<p>MFA, in combination with strong passwords, can protect accounts from more than 95% of attacks, and given the fact that Azure MFA can be used free of charge in the default configuration, there is no reason not to enable it.</p>
			<p>Now that you know how to configure MFA from an administrator's and a user's perspective, let's move one step further and learn how conditional access can be used to fine-tune the MFA process according to your company's business needs.</p>
			<h1 id="_idParaDest-60"><a id="_idTextAnchor066"/>Using Conditional Access</h1>
			<p>MFA, the feature <a id="_idIndexMarker153"/>we discussed in the previous section, is the perfect option for better protecting your cloud identities. But it is still kind of an on/off decision. Either you activate a user account for MFA or you don't. Wouldn't it be great to dynamically react to authentication attempts and then decide whether an MFA challenge is needed? With <strong class="bold">Conditional Access</strong>, there is a feature that enables us to define authentication conditions that require more or fewer challenges in the authentication process.</p>
			<p>Conditional Access gives customers a broad variety of options to include or exclude in a policy. For example, you could enforce the usage of MFA for specified directory roles, such as Azure AD Global Administrators, and in addition to that, require that the login is performed on a corporate-owned device. Or, you could exclude your "normal" Office 365 workers from being challenged by MFA, but only if they <a id="_idIndexMarker154"/>are working from a corporate office. As soon as one of them tries to log in from a train station, mobile device, home office, and so on, an MFA challenge is triggered. You see, there are lots of options, and we'll cover them in this section.</p>
			<div><div><img src="img/Fig._3.13.jpg" alt="Figure. 3.13 - Conditional Access in Azure AD&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.13 - Conditional Access in Azure AD</p>
			<p>You'll find all Conditional Access-related settings in the Azure portal under <strong class="bold">Azure Active Directory</strong> &gt; <strong class="bold">Conditional Access</strong>:</p>
			<div><div><img src="img/Fig._3.14.jpg" alt="Figure. 3.14 - Conditional Access overview page&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.14 - Conditional Access overview page</p>
			<p>The main section that appears now is the <strong class="bold">Policies</strong> section. Conditional Access policies define and enforce the complexity of authentication based on several conditions. Policies can depend on locations from <a id="_idIndexMarker155"/>which authentications come, user and sign-in risk, devices, applications, or a combination of all of these. You can use Conditional Access policies to decide when and for whom access to your cloud environment will be allowed or blocked. So, by using Conditional Access policies, you can always make sure to apply the right amount of security enforcements when they are needed to keep your environment secure, and not to challenge your users unnecessarily when not needed.</p>
			<p>Before we take a deeper look at how to define all those conditions in a Conditional Access policy, let's first have a look at named locations that can be used within these policies.</p>
			<h2 id="_idParaDest-61"><a id="_idTextAnchor067"/>Named locations</h2>
			<p>There is a management area to define custom settings you can use in your Conditional Access policies. The first <a id="_idIndexMarker156"/>area to mention is <strong class="bold">Named locations</strong>. For <strong class="bold">Named locations</strong>, there are two different options to click. The first option is <strong class="bold">Configure MFA trusted IPs</strong>, which will redirect you to the <strong class="bold">Services</strong> settings in the legacy portal you already know from the previous section. You can use this option to define IP address ranges that should always be excluded from MFA challenges. </p>
			<div><div><img src="img/Fig._3.15.jpg" alt="Figure. 3.15 - Conditional access - named locations&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.15 - Conditional access - named locations</p>
			<p>The second <a id="_idIndexMarker157"/>option is <strong class="bold">+ New location</strong>, with which you can define IP ranges, and even countries and geographical regions, to use them for custom Conditional Access policies. If you select <strong class="bold">Mark as trusted location</strong> for an IP range, a user's sign-in risk is lowered when an authentication request comes from there. </p>
			<div><div><img src="img/Fig._3.16.jpg" alt="Figure. 3.16 - Creating a trusted named location&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.16 - Creating a trusted named location</p>
			<p>Sign-in risks are important for Azure AD Identity Protection, the feature we look into in the <em class="italic">Introducing Azure AD Identity Protection</em> section.</p>
			<h2 id="_idParaDest-62"><a id="_idTextAnchor068"/>Custom controls</h2>
			<p>With <em class="italic">custom controls</em>, you can redirect your users during the authentication process to an external compatible service to satisfy further authentication requirements outside of Azure AD. The user's browser window <a id="_idIndexMarker158"/>is redirected to a third-party service, where the user needs to perform any further authentication requirements before being granted access to their cloud resources. Custom controls depend on the third-party application. For example, you could integrate a third-party MFA provider into your authentication workflow instead of relying on the Azure AD MFA service.</p>
			<h2 id="_idParaDest-63"><a id="_idTextAnchor069"/>Terms of use</h2>
			<p>You can define custom terms of use that need to be accepted before users are allowed to access certain <a id="_idIndexMarker159"/>cloud applications. For example, you could allow users to use their own devices to access your environment, but only if they accept your terms of use.</p>
			<div><div><img src="img/Fig._3.17.jpg" alt="Figure. 3.17 - Terms of use&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.17 - Terms of use</p>
			<p>To configure your <a id="_idIndexMarker160"/>custom terms of use, you need to upload one PDF for every language you want to create them for. After saving, the terms of use will appear in the grant control list when creating a new Conditional Access policy.</p>
			<h2 id="_idParaDest-64"><a id="_idTextAnchor070"/>Conditional Access policies</h2>
			<p>As mentioned before, Conditional Access policies help you to always apply the right amount of security for every authentication situation, without unnecessarily blocking or challenging your users when not needed. They can be seen as is, then.</p>
			<p>Conditional Access <a id="_idIndexMarker161"/>policies consist of <em class="italic">assignments</em> and <em class="italic">access controls</em>. Assignments define who will be impacted by this Conditional Access policy and in which situation. Access controls define whether access is blocked or granted, and if it's granted, on which conditions.</p>
			<h3 id="_idParaDest-65">Assignments</h3>
			<p>In the <strong class="bold">Assignments</strong> section, you can select users and groups, cloud apps or user actions, and conditions to <a id="_idIndexMarker162"/>include or exclude in a Conditional Access policy, as shown in the following screenshot:</p>
			<div><div><img src="img/Fig._3.18.jpg" alt="Figure. 3.18 - Users and groups - select which users and groups are to be included &#13;&#10;or excluded in a Conditional Access policy&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.18 - Users and groups - select which users and groups are to be included or excluded in a Conditional Access policy</p>
			<p>You can choose to <strong class="bold">Include</strong> or <strong class="bold">Exclude</strong> <strong class="bold">None</strong>, <strong class="bold">All users</strong>, or a defined subset of users and groups in a Conditional Access policy. You can also select to exclude all guest and external users, directory roles (such as Global Administrators), or a defined subset of users and groups in your Conditional Access policy.</p>
			<p class="callout-heading">Important Note</p>
			<p class="callout">When selecting all users and then blocking access with this policy, this will also affect all your administrator accounts. That said, you could lock yourself out when activating this policy. It is recommended to apply a policy to a small set of users first to make sure it behaves as expected!</p>
			<p>You can also <strong class="bold">Include</strong> or <strong class="bold">Exclude</strong> cloud applications or user actions in the Conditional Access policy. Again, you can select <strong class="bold">None</strong>, <strong class="bold">All apps</strong>, or selected apps to be included, or define selected apps to be exempted from the policy.</p>
			<p class="callout-heading">Important Note</p>
			<p class="callout">When selecting all cloud apps to be included in your policy, this will also affect the Azure portal. Make sure not to lock yourself out by only activating the policy to a small set of users first, so you can make sure that it behaves as expected!</p>
			<p>In the <strong class="bold">User actions</strong> section, you can select whether this policy affects the registration of security information for your users. That means that the policy is active for users when proceeding through the MFA registration process.</p>
			<p>Conditions to <a id="_idIndexMarker163"/>be included in your assignments are sign-in risk, device platforms, locations, client apps, and device state. Sign-in risk is calculated by Azure AD Identity Protection. You can select the sign-in risk level this policy will apply to from <strong class="bold">No risk</strong>/<strong class="bold">Low</strong>/<strong class="bold">Medium</strong>/<strong class="bold">High</strong>. Device platforms can be included or excluded. You can select to include any device platform in your policy, or to include or exclude one or several of the following:</p>
			<ul>
				<li>Android</li>
				<li>iOS</li>
				<li>Windows Phone</li>
				<li>Windows</li>
				<li>macOS</li>
			</ul>
			<p>You can include any location or select to include or exclude all trusted locations, or selected locations you have already defined in one of the preceding steps.</p>
			<p>Client apps to include can either be a browser, or mobile apps and desktop clients, including modern authentication clients, Exchange ActiveSync clients, or other clients (older office clients or other mail protocols).</p>
			<p>You can either include all device states in a policy, or exclude devices that are hybrid Azure AD joined or marked as compliant in Intune.</p>
			<h3 id="_idParaDest-66">Access controls</h3>
			<p>In the <strong class="bold">Access controls</strong> section, you define whether you want to block or grant access to your environment <a id="_idIndexMarker164"/>depending on the selection you made before. If you want to grant access, you can either grant it without any condition or you can require one or all of the following controls to be enforced:</p>
			<ul>
				<li><strong class="bold">Require multi-factor authentication</strong>: When the conditions you defined in the policy are met, user access is granted when the user responds to the MFA challenge.</li>
				<li><strong class="bold">Require device to be marked as compliant</strong>: In Intune, you can define device compliance policies. For example, you can mark a device as compliant only when it is corporate owned and currently patched.</li>
				<li><strong class="bold">Require hybrid Azure AD joined device</strong>: Devices that are hybrid Azure AD joined are owned by an organization. They exist in the cloud and on-premises, which means that they are joined to both Windows Server AD and Azure AD.</li>
				<li><strong class="bold">Require approved client app</strong>: Access is only granted if one of the approved client apps is used to access corporate information. Today, an approved client app can be one out of more than 25 apps related to Microsoft 365, including, but not limited to, Microsoft Azure Information Protection, Microsoft Excel, Microsoft Edge, Microsoft Intune Managed Browser, Microsoft Teams, and Microsoft Outlook.</li>
				<li><strong class="bold">Require app protection policy</strong>: You can use Intune to define an app protection policy for Microsoft Cortana, Microsoft Outlook, Microsoft OneDrive, and Microsoft Planner. With this setting, you can <a id="_idIndexMarker165"/>enforce that an app protection policy is present before granting access to corporate information, as illustrated in the following screenshot:</li>
			</ul>
			<div><div><img src="img/Fig._3.19.jpg" alt="Figure. 3.19 - Conditions for granting access using Conditional Access&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.19 - Conditions for granting access using Conditional Access</p>
			<p>Now that you know how to configure Conditional Access policies in theory, let's go a step further and try to define settings for some behaviors.</p>
			<p>For example, you could create a policy that blocks access for all devices that are not hybrid Azure AD joined. However, this policy should not affect users that are members of a particular group of administrators. A policy that would fit your needs could include the following:</p>
			<ol>
				<li value="1">Include all users and exclude the particular group of administrators.</li>
				<li>Exclude devices that are hybrid Azure AD joined.</li>
				<li>Block access.</li>
			</ol>
			<p>You might also want to enforce MFA when authentication attempts are not coming from a trusted location or if users are not using corporate-owned devices. This policy would:</p>
			<ol>
				<li value="1">Include all users.</li>
				<li>Include all locations and exclude all trusted locations.</li>
				<li>Grant access and require MFA.<p class="callout-heading">Important Note</p><p class="callout">It is best practice not to include all users without exception in your Conditional Access policies. This is because you would risk locking yourself out of your cloud environment.</p></li>
			</ol>
			<p>Your organization <a id="_idIndexMarker166"/>might enforce your users to proceed through the MFA enrollment from their office. That way, your organization can make sure that even if a user's credentials have been leaked, an attacker would need to be within your network perimeter to configure MFA. A Conditional Access policy to enforce that might be configured like this:</p>
			<ol>
				<li value="1">Include all users and exclude privileged roles or a particular user group containing administrative accounts.</li>
				<li>Activate <a id="_idIndexMarker167"/>the <strong class="bold">Register security information</strong> user action.</li>
				<li>Include a selected location that defines your office location.</li>
				<li>Block access.</li>
			</ol>
			<p>With Conditional Access, you can granularly define when and how access to your cloud environment is granted or declined. During the course of this topic, we have already touched on Azure AD Identity Protection. Now, let's move on to the next section, in which you will learn what Azure AD Identity Protection actually is and how you can use it.</p>
			<h1 id="_idParaDest-67"><a id="_idTextAnchor071"/>Introducing Azure AD Identity Protection</h1>
			<p>As already mentioned, an important goal in terms of security is to make attack attempts as expensive as possible for an attacker. That said, it is important to raise the bar and have several complementing <a id="_idIndexMarker168"/>technologies in place that add extra value to your security posture. On the other hand, you want to make sure not to block legitimate user authentications so you do not negatively affect your users' login experience. Microsoft has been protecting cloud identities for more than 10 years now, and with Azure AD Identity Protection, they let you protect identities using their protection systems.</p>
			<p>Stealing the credentials of user accounts, even if they are not highly privileged, has always been a good way of gaining access to corporate resources. Over the years, attackers have learned to leverage third-party breaches or highly sophisticated phishing attacks to get hold of corporate credentials. Even if attackers gain access to low-privileged user accounts, as soon as they do, it is relatively easy for them to elevate their level of privilege or gain access to important corporate resources through lateral movement.</p>
			<p>So, what we need to do is the following:</p>
			<ul>
				<li>Protect all identities at all levels of privilege</li>
				<li>Prevent compromised identities from accessing corporate resources</li>
			</ul>
			<p>Now, the second <a id="_idIndexMarker169"/>step is the more difficult one because you first need to find out whether an identity is compromised. This is when Azure AD Identity Protection comes into play.</p>
			<h2 id="_idParaDest-68"><a id="_idTextAnchor072"/>Azure AD Identity Protection at a glance</h2>
			<p>Adaptive machine learning algorithms and heuristics are what Azure AD utilizes when determining anomalies and <a id="_idIndexMarker170"/>suspicious behavior during the authentication of user accounts. With this data, Azure AD Identity Protection can generate reports and alerts that enable customers to evaluate recent logons. Furthermore, Azure AD Identity Protection can calculate user and sign-in risk levels that can be used in risk-based Conditional Access policies. For example, you can decide to enforce the usage of MFA when a login attempt's risk level is calculated as medium or above, or to block a sign-in attempt based on the risk calculation.</p>
			<div><div><img src="img/Fig._3.20.jpg" alt="Figure. 3.20 - A sign-in was blocked by Azure AD Identity Protection&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.20 - A sign-in was blocked by Azure AD Identity Protection</p>
			<p>In the preceding screenshot, you see that a sign-in was blocked because the user's identity could not be verified. This is because John did not have MFA configured before this suspicious sign-in activity was detected. Of course, the person trying to log on and being blocked now is not able to configure MFA at this stage because that would enable attackers to configure the service according to their needs.</p>
			<div><div><img src="img/Fig._3.21.jpg" alt="Figure. 3.21 - Azure AD Identity Protection Overview dashboard&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.21 - Azure AD Identity Protection Overview dashboard</p>
			<p>Azure AD uses several types of risk detection in realtime (5-10 minutes) and offline (2-4 hours). As soon as there has been a risk detection related to an account sign-in, this detection is added to a logical concept called <em class="italic">risky sign-ins</em>. A risky sign-in <a id="_idIndexMarker171"/>indicates a sign-in attempt that might have been performed by an attacker and not the legitimate account owner. Based on those detections, the probability that <a id="_idIndexMarker172"/>the sign-in has been performed by a bad actor is calculated and is reflected in the <em class="italic">sign-in risk level</em>. You can use the sign-in risk level (<strong class="bold">Low</strong>, <strong class="bold">Medium</strong>, <strong class="bold">High</strong>) to define a <em class="italic">sign-in risk policy</em>. The sign-in risk policy is an automated response depending on the specified sign-in risk level that is used to either block access to your resources or to require a user to pass an MFA challenge before being granted access to your corporate environment.</p>
			<p>Besides the sign-in risk, Azure AD also detects the probability that a user account has been compromised. This behavior is called <em class="italic">user risk detection</em>. All risk detections that have been detected for a user and that have not been resolved are known as <em class="italic">active risk detections</em>. All active risk detections that are associated with a user define the user risk. Based on the user risk, Azure AD calculates the probability (<strong class="bold">Low</strong>, <strong class="bold">Medium</strong>, <strong class="bold">High</strong>) that the user account has been compromised. This probability is known as the <em class="italic">user risk level</em>. For example, if a risky sign-in is detected and the MFA challenge is passed, there is no active risk detection for this user. Thus, in this case, the user risk level will stay low. You can define a <em class="italic">user risk policy</em> as an automated response for a specific user risk level. With this policy, you can either block access to corporate resources or enforce a password change to get the user back to a clean state.</p>
			<h3 id="_idParaDest-69">Risk detection</h3>
			<p>In Azure AD, there <a id="_idIndexMarker173"/>currently are six different types <a id="_idIndexMarker174"/>of risk <a id="_idIndexMarker175"/>detection:</p>
			<ol>
				<li value="1"><strong class="bold">Users with leaked credentials:</strong> Leaked credentials occur due to mass credential theft by cybercriminals followed by public posting of these credentials, particularly on the dark web. Microsoft actively monitors such channels and compares the leaked username and password pairings against existing users, and identifies accounts that have leaked credentials.</li>
				<li><strong class="bold">Sign-ins from anonymous IP addresses:</strong> Anonymous IP addresses are used by people who want to mask their device's real IP address. There can be a number of reasons that lead to the use of such IP addresses, some of them malicious. Microsoft checks incoming sign-ins from IP addresses that have previously been identified as anonymous IP addresses.</li>
				<li><strong class="bold">Impossible travel to atypical locations</strong> are sign-ins from geographically distant locations. At least one location needs to be an atypical location based on the user's sign-in behavior. For example, the user is on his or her first business trip to the US and logs in from there. In addition to that, the underlying machine learning algorithm considers the time between the sign-ins and the time it would have taken the user to travel from one location to the other. Microsoft tries <a id="_idIndexMarker176"/>to ignore obvious false-positives, such as <strong class="bold">virtual private networks (VPNs)</strong> between locations, or locations that have been known as familiar for other user accounts within the same organization. This risk detection type needs 14 days of analyzing user behavior before being able to calculate the risk for a user account.</li>
				<li><strong class="bold">Sign-ins from infected devices:</strong> This method of risk detection depends on Microsoft keeping track of IP addresses that are known to communicate with bot servers. Microsoft matches all IP addresses connecting to the service against these known rogue IPs to determine whether there are sign-ins from infected devices. This type of risk detection also targets simple attack methods such as password spray attacks.</li>
				<li><strong class="bold">Sign-ins from IP addresses with suspicious activity:</strong> In this method of detection, Microsoft examines IPs for signs of suspicious activity. The main indicator is when an IP address has a large number of failed sign-ins in a relatively short period of time. This can be an indication of a bad actor who is trying to guess passwords using simple attack methods such as brute-force or password spray attacks. </li>
				<li><strong class="bold">Sign-ins from unfamiliar locations:</strong> This method of risk detection involves Microsoft maintaining a historical record of the IP addresses used by users regularly. The system detects whether a request is coming from an IP address that has not been used before. The system needs at least 30 days to create a useable history of familiar and unfamiliar locations.</li>
			</ol>
			<h3 id="_idParaDest-70">Creating a sign-in risk or user risk policy</h3>
			<p>Policy creation <a id="_idIndexMarker177"/>is the easiest part of Azure AD Conditional <a id="_idIndexMarker178"/>Access. In order to create a sign-in risk policy, you just need to navigate to <strong class="bold">Azure AD Identity Protection </strong>-&gt;<strong class="bold"> Sign-in risk policy</strong> in the Azure portal. There, you define conditions (<strong class="bold">Sign-in risk</strong> level - <strong class="bold">Low</strong> and above, <strong class="bold">Medium</strong> and above, or <strong class="bold">High</strong>), access controls (block access or challenge the user with MFA), and select for which <a id="_idIndexMarker179"/>user or group you want to enable the policy. That's it.</p>
			<div><div><img src="img/Fig._3.22.jpg" alt="Figure. 3.22 - Creating a sign-in risk policy&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.22 - Creating a sign-in risk policy</p>
			<p>For a new user risk policy, you navigate to <strong class="bold">Azure AD Identity Protection</strong> -&gt; <strong class="bold">User risk policy</strong> and define the respective parameters. The difference from a sign-in risk policy is that you can either block access or enforce a password change for a risky user.</p>
			<div><div><img src="img/Fig._3.23.jpg" alt="Figure. 3.23 - Creating a user risk policy&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.23 - Creating a user risk policy</p>
			<p>Now you know <a id="_idIndexMarker180"/>how Azure AD Identity Protection works and how you can use calculated user and sign-in risk levels to protect your accounts. Now, we will move forward and focus on privileged user accounts. </p>
			<h1 id="_idParaDest-71"><a id="_idTextAnchor073"/>Understanding RBAC</h1>
			<p>In <a href="B15414_02_Final_JM_ePub.xhtml#_idTextAnchor038"><em class="italic">Chapter 2</em></a>, <em class="italic">Governance and Security</em>, we mentioned security principles such as segregation of duties and the principle of least privilege. With RBAC, we have the technical feature to implement these principles <a id="_idIndexMarker181"/>in Azure AD. RBAC is the way to manage access to all Azure resources, but also to Azure AD and Office 365.</p>
			<p>As already discussed, Azure offers several levels of scope that can be used to grant access rights to accounts. Furthermore, there are several roles, such as <strong class="bold">Owner</strong>, <strong class="bold">Azure Sentinel Contributor</strong>, or <strong class="bold">Reader</strong>, as can be seen in the following screenshot:</p>
			<div><div><img src="img/Fig._3.24.jpg" alt="Figure. 3.24 - RBAC role assignment in Microsoft Azure&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.24 - RBAC role assignment in Microsoft Azure</p>
			<p>You need <a id="_idIndexMarker182"/>three different entities to create a role assignment:</p>
			<ul>
				<li>A security principal, which can be either one of users, groups, or service principals.</li>
				<li>A role, which describes a set of management rights. For example, the contributor role contains all actions, except authorization-related rights. So, a contributor may manage all aspects at a given scope without being able to grant access to resources.</li>
				<li>A scope to set the access rights, starting from the management group level down to single resources.</li>
			</ul>
			<p>If those three come together, this is what we call an RBAC role assignment.</p>
			<p class="callout-heading">Important Note</p>
			<p class="callout">You need to be granted <code>Microsoft.Authorization/roleAssignments/write</code> and <code>Microsoft.Authorization/roleAssignments/delete</code> rights in order to be able to create or delete role assignments. These rights are, by default, granted to the RBAC roles User Access Administrator and Owner.</p>
			<p>You can edit role assignments at all management scopes of Azure. It is important to know that role assignments are inherited top to bottom. This means that if you configure a role assignment at a resource group level, the access rights are also valid on all resources within this particular resource group; and if you configure a role assignment at a management group level, it is inherited to all subscriptions, resource groups, and resources within that scope.</p>
			<p>In the Azure portal, there <a id="_idIndexMarker183"/>is the <strong class="bold">Access Control (IAM)</strong> blade that is used to manage all aspects of RBAC. You can check access for particular accounts, find out explicit and inherited roles and deny assignments, and find out which built-in or custom roles exist for the given scope.</p>
			<div><div><img src="img/Fig._3.25.jpg" alt="Figure. 3.25 - RBAC management blade in the Azure portal&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.25 - RBAC management blade in the Azure portal</p>
			<p>To create <a id="_idIndexMarker184"/>a new role assignment, you need to click <strong class="bold">+ Add </strong>and then select <strong class="bold">Add role assignment</strong>.</p>
			<div><div><img src="img/Fig._3.26.jpg" alt="Figure. 3.26 - Adding a role assignment&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.26 - Adding a role assignment</p>
			<p>You then select the role and security principal you want to grant access, and then save your selection. Done.</p>
			<p>RBAC is pretty straightforward to implement, but can be way more challenging when planning for access rights <a id="_idIndexMarker185"/>in your environment. This is why you should already plan for RBAC roles when defining your governance concept.</p>
			<p class="callout-heading">Important Note</p>
			<p class="callout">Define the RBAC roles you need in your environment when creating your governance concept. Doing so, you will have a good overview of which access rights (roles) you need and who (which security principal) you need to grant access to. That said, it will be much easier to create your role assignments later.</p>
			<p>In the following section, we will show you how to create custom RBAC roles so you can more granularly use roles according to your needs.</p>
			<h2 id="_idParaDest-72"><a id="_idTextAnchor074"/>Creating custom RBAC roles</h2>
			<p>Custom RBAC roles are used whenever built-in roles do not entirely fit your company's needs regarding access <a id="_idIndexMarker186"/>rights to your cloud environments. As mentioned before, a role is basically a set of management rights that then are applied to users or groups in a role assignment. There is a difference between <em class="italic">custom Azure AD RBAC roles</em> and <em class="italic">custom RBAC roles for Azure resources</em>. If you want to create a custom Azure AD RBAC role, you need to go through the following steps:</p>
			<ol>
				<li value="1">Navigate to <strong class="bold">Azure Active Directory </strong>-&gt;<strong class="bold"> Roles and administrators</strong> and then click the + <strong class="bold">New custom role</strong> button in the Azure portal, as shown in the following screenshot:<div><img src="img/Fig._3.27.jpg" alt="Figure. 3.27 - Creating a new custom role&#13;&#10;"/></div><p class="figure-caption">Figure. 3.27 - Creating a new custom role</p></li>
				<li>Enter a <strong class="bold">Name</strong> and, optionally, a <strong class="bold">Description</strong> for your custom role. You can decide either to <strong class="bold">Start from scratch</strong>, or to <strong class="bold">Clone from a custom role</strong> to continue with your custom role creation. In the following example, we decide to <strong class="bold">Start from scratch</strong>:<div><img src="img/Fig._3.28.jpg" alt="Figure. 3.28 - Defining basic information&#13;&#10;"/></div><p class="figure-caption">Figure. 3.28 - Defining basic information</p></li>
				<li>On the <strong class="bold">Permissions</strong> tab, you select all permissions that you later want to grant to your identity.</li>
				<li>On the <strong class="bold">Review + create</strong> tab, you can finally confirm your settings, and by clicking the <strong class="bold">Create</strong> button, your custom <a id="_idIndexMarker187"/>Azure AD RBAC role is created, as illustrated in the following screenshot:</li>
			</ol>
			<div><div><img src="img/Fig._3.29.jpg" alt="Figure. 3.29 - Reviewing and creating your custom Azure AD RBAC role&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.29 - Reviewing and creating your custom Azure AD RBAC role</p>
			<p>The creation of custom RBAC roles for Azure resources cannot be done in the Azure portal. You need to use <a id="_idIndexMarker188"/>PowerShell, the Azure <strong class="bold">command-line interface (CLI),</strong> or the Azure<strong class="bold"> representational state transfer (REST) </strong>API. In this example, we will create a custom <a id="_idIndexMarker189"/>RBAC role with PowerShell.</p>
			<p>To create a custom RBAC role, you need to define which resource operations per resource provider have to be allowed to meet your goals. Therefore, you should initially find out which resource provider operations exist. You can do so by using the <code>Get-AzProviderOperation</code> cmdlet, as shown in the following code block:</p>
			<pre>Get-AzProviderOperation &lt;operation&gt; | FT OperationName, Operation, Description -autosize</pre>
			<p>For example, if you <a id="_idIndexMarker190"/>want to find all resource provider operations for the <code>Microsoft.Compute/VirtualMachines/*</code> resource provider, the command and the result could look like this:</p>
			<div><div><img src="img/Fig._3.30.jpg" alt="Figure. 3.30 - Resource provider operations for Azure VMs&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.30 - Resource provider operations for Azure VMs</p>
			<p>The resource provider <a id="_idIndexMarker191"/>operations that are listed in the preceding screenshot are all actions related to <strong class="bold">virtual machines (VMs)</strong> to which you can grant access to users, groups, or service principals. If you want to know which resource provider operations are tied to a specific RBAC role, you can find this out with the following command:</p>
			<pre>(Get-AzRoleDefinition &lt;role name&gt;).actions</pre>
			<p>For example, if you want to know which actions are allowed for the Virtual Machine Contributor RBAC role, the command would be as follows:</p>
			<pre>(Get-AzRoleDefinition "Virtual Machine Contributor").actions</pre>
			<p>When you know which resource provider operations exist, you can start creating your custom RBAC role. Again, you can start by creating a new role from scratch or by using an existing role as a template to alter according to your needs. You will find examples for creating custom RBAC roles for Azure resources in the GitHub repository belonging to this book.</p>
			<p>Now that you have learned what RBAC is and how you can leverage it, we will give you an introduction <a id="_idIndexMarker192"/>to <strong class="bold">Azure AD Privileged Identity Management</strong> (<strong class="bold">Azure AD PIM</strong>), another <a id="_idIndexMarker193"/>service focused on protecting privileged user accounts. Let's move on!</p>
			<h1 id="_idParaDest-73"><a id="_idTextAnchor075"/>Protecting admin accounts with Azure AD PIM</h1>
			<p>In <a href="B15414_02_Final_JM_ePub.xhtml#_idTextAnchor038"><em class="italic">Chapter 2</em></a><em class="italic">, Governance and Security</em>, we discussed the fact that we often see customer environments <a id="_idIndexMarker194"/>in which administrators have a huge set of privileges they do not necessarily need. We also discussed <strong class="bold">Separation of Duties</strong> (<strong class="bold">SoD</strong>) and the fact <a id="_idIndexMarker195"/>that no one should have more privileges than ever needed for doing a particular job. Now, what if you could even reduce that set of access rights to a particular <a id="_idIndexMarker196"/>point in time or time range? Or what if you need an approval process for granting privileged access? Maybe you want to monitor the usage of privileged roles or want to decide whether a person still needs privileged access rights?</p>
			<p>Azure AD PIM is a service <a id="_idIndexMarker197"/>that offers several features that help you further protect privileged accounts, some of which are the following:</p>
			<ul>
				<li><strong class="bold">Just-in-time</strong> and <strong class="bold">time-bound</strong> privileged access</li>
				<li><strong class="bold">Approval</strong> to activate privileged roles</li>
				<li><strong class="bold">Access reviews</strong> to ensure that roles are still needed</li>
				<li>Enforcing <strong class="bold">MFA</strong> for role activation</li>
			</ul>
			<p>With Azure AD PIM, you can—but do not need to—infinitely grant access rights to privileged users; you make them "eligible" for requesting access rights. So, users are only granted access rights when they really need them. Access can be either approved automatically after a user requests access or by manual approval. The nice thing is, you can cover both Azure AD and Azure resource roles with Azure AD PIM.</p>
			<p class="callout-heading">Tip</p>
			<p class="callout">Make sure you have enforced the principle of least privilege in your organization before starting with PIM. </p>
			<h2 id="_idParaDest-74"><a id="_idTextAnchor076"/>Enabling PIM</h2>
			<p>Before using PIM, you have <a id="_idIndexMarker198"/>to enable the service for your directory. You can do so by signing in to the Azure portal as a Global Administrator of your directory and then <a id="_idIndexMarker199"/>navigating to <strong class="bold">Azure AD Privileged Identity Management</strong>. Once there, you will find the option <strong class="bold">Consent to PIM</strong>, as shown in the following screenshot:</p>
			<div><div><img src="img/Fig._3.31.jpg" alt="Figure. 3.31 - Consenting to PIM&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.31 - Consenting to PIM</p>
			<p>You then click on <strong class="bold">Verify my identity</strong> to verify your identity with MFA. If you haven't already done so, you will be asked to activate MFA for your account, as covered in the <em class="italic">Understanding Multi-factor Authentication (MFA)</em> section in this chapter. Once your identity has been verified, you can click the <strong class="bold">Consent</strong> button and <a id="_idIndexMarker200"/>confirm the dialog by clicking <strong class="bold">Yes</strong>, as shown in the following screenshot:</p>
			<div><div><img src="img/Fig._3.32.jpg" alt="Figure. 3.32 - Confirming PIM consent&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.32 - Confirming PIM consent</p>
			<p>Now that you have activated PIM for your directory, you need to sign up to PIM to manage your Azure AD roles. You do so <a id="_idIndexMarker201"/>by navigating to the <strong class="bold">Azure AD roles</strong> section of the Azure AD PIM dashboard and clicking on <strong class="bold">sign up</strong>. Once sign-up completes, the Azure AD options will be enabled.</p>
			<h2 id="_idParaDest-75"><a id="_idTextAnchor077"/>Managing Azure AD roles in PIM</h2>
			<p>In the <strong class="bold">Azure AD roles</strong> view, you can <a id="_idIndexMarker202"/>manage PIM behavior for <a id="_idIndexMarker203"/>all Azure AD roles and also have access to Azure AD role-related tasks such as access reviews, approvals, or your own roles and access requests, as shown in the following screenshot:</p>
			<div><div><img src="img/Fig._3.33.jpg" alt="Figure. 3.33 - Azure AD role management in PIM&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.33 - Azure AD role management in PIM</p>
			<p>The <strong class="bold">Manage</strong> section offers all the Azure AD PIM configuration options for your Azure AD directory. <strong class="bold">Roles</strong> gives you an overview of all Azure AD roles and enables you to add members to a particular role. In the <strong class="bold">Members</strong> section, you get an overview about all accounts that are either eligible or permanent members of privileged roles. It is an at-a-glance view of all users that have elevated rights in your directory. The <strong class="bold">Alerts</strong> section shows you issues to review. For example, you will get an overview of administrators that are not using their privileged roles (and therefore can be unassigned). You can also create regular <strong class="bold">Access reviews</strong> to determine whether particular accounts still need to be role members. In the respective section, you find a configuration wizard to create these recurring reviews. The <strong class="bold">Wizard</strong> in the respective section leads you through a process to convert users with existing permanent role assignments into eligible users. Finally, in <strong class="bold">Settings</strong>, you can configure global settings for Azure AD roles, alerts, and access reviews.</p>
			<p class="callout-heading">Tip</p>
			<p class="callout">You can require approval for a role activation. This requirement is a setting that comes with the role, not with the user account. That said, when you configure this requirement, it is valid for all users that are eligible to request access for this particular role.</p>
			<p>Once an account is made eligible, its owner needs to request access before conducting a task. Let's walk through an example: John works in the helpdesk team and this team is responsible for managing user accounts. Therefore, we make John's account eligible for the <em class="italic">User Administrator</em> role. When John <a id="_idIndexMarker204"/>signs in to the Azure portal and then wants <a id="_idIndexMarker205"/>to manage user settings in Azure AD, he will only be able to see what usual user accounts are able to see; he won't be able to manage any accounts. So, John navigates to the Azure AD PIM dashboard and sees that he needs to activate his role first.</p>
			<div><div><img src="img/Fig._3.34.jpg" alt="Figure. 3.34 - Eligible roles for a user&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.34 - Eligible roles for a user</p>
			<p>John can activate the role for the time that you configured before in the <code>1 </code>hour only. In addition to that, we have enforced entering a justification that later can be reviewed in the audit history:</p>
			<div><div><img src="img/Fig._3.35.jpg" alt="Figure. 3.35 - Activating a role&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.35 - Activating a role</p>
			<p>John could also set a custom activation start time. For example, when John knows that he will need access later that day, he could manually set an activation time in the future. With a click on <strong class="bold">Activate</strong>, an activation <a id="_idIndexMarker206"/>request is submitted and validated once the <a id="_idIndexMarker207"/>activation is done. Then, after signing out and logging back in, John will have role membership in User Administrators for 1 hour.</p>
			<div><div><img src="img/Fig._3.36.jpg" alt="Figure. 3.36 - Successful role activation&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.36 - Successful role activation</p>
			<p>So, the process for the user is straightforward. Request access; log out and back in again; and then do the job. Of course, every activation request is logged, as well as every configuration change a user does when having elevated rights. As already mentioned, monitoring is essential, and so there's no way around it.</p>
			<h2 id="_idParaDest-76"><a id="_idTextAnchor078"/>Managing Azure resources with PIM</h2>
			<p>You can not only use PIM for managing Azure AD roles but also for Azure resource management based on RBAC. You first <a id="_idIndexMarker208"/>need to onboard Azure subscriptions <a id="_idIndexMarker209"/>to PIM so that you can use it to manage resource-based access rights. To <a id="_idIndexMarker210"/>do so, you navigate to <strong class="bold">Azure resources</strong> on the <a id="_idIndexMarker211"/>Azure AD PIM dashboard and select <strong class="bold">Discover resources</strong>. You then filter <a id="_idIndexMarker212"/>for unmanaged resources and select <strong class="bold">Manage resource</strong>, as illustrated in the following screenshot:</p>
			<div><div><img src="img/Fig._3.37.jpg" alt="Figure. 3.37 - Onboarding an Azure subscription to PIM&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.37 - Onboarding an Azure subscription to PIM</p>
			<p>You can also select a <strong class="bold">Management</strong> group to onboard to PIM. PIM will automatically manage role assignments for all child resources within the given scope after onboarding. The configuration options are similar to the ones for Azure AD management with PIM. One difference is that you need to enter a start <a id="_idIndexMarker213"/>and an end date for the role assignment. After the end date, the user will no longer be eligible for requesting access. The maximum is a time frame of 1 year. </p>
			<p>Let's take <a id="_idIndexMarker214"/>an example. In his role as project owner for the Mastering Azure Security project, John needs to manage all resources within a particular resource group that has been created for this project. However, he should not be able to give other users or groups access to that resource group so access to the Contributor role should be the right one for him.</p>
			<div><div><img src="img/Fig._3.38.jpg" alt="Figure. 3.38 - John is a member of the Contributor role via PIM&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.38 - John is a member of the Contributor role via PIM</p>
			<p>If John logs in to the Azure portal, he won't be able to see any resources or resource groups because he has no permanent access rights to Azure resources. Again, he navigates to the Azure AD PIM dashboard, selects Azure resources, and then activates his role. After logging out and signing in again, John is able to <a id="_idIndexMarker215"/>manage his resources in the <strong class="bold">MasteringAzSec</strong> resource group.</p>
			<p class="callout-heading">Tip</p>
			<p class="callout">PIM always activates roles for 1 or several hours, even if access is only needed for 10 minutes. Therefore, users can find an option to deactivate roles after they have finished their tasks by navigating to <strong class="bold">My roles</strong> and then <strong class="bold">Active roles</strong> in both the <strong class="bold">Azure AD roles</strong> and the <strong class="bold">Azure resources</strong> sections.</p>
			<p>You have now learned how to further reduce your privileged accounts' attack surfaces by using Azure AD PIM. </p>
			<h1 id="_idParaDest-77"><a id="_idTextAnchor079"/>Hybrid authentication and SSO</h1>
			<p>Organizations <a id="_idIndexMarker216"/>have come a long way from an on-premises IT infrastructure <a id="_idIndexMarker217"/>since they started to roll out cloud-based <strong class="bold">Software as a Service (SaaS</strong>) applications such <a id="_idIndexMarker218"/>as Microsoft Office 365. Users usually do not want to keep track of several accounts and, as they already have a corporate account based on Windows Server AD, they usually want to also use that account for cloud-based authentications. Now, this is when Azure AD Connect comes into play.</p>
			<p>Azure AD Connect is a directory replication service that helps you to synchronize existing user accounts from an on-premises Windows Server AD with Azure AD. This is a mandatory step because you can only grant access rights and licenses to cloud-based identities in Azure AD, not to on-premises accounts.</p>
			<p>With Azure <a id="_idIndexMarker219"/>AD Connect, you have several options to provide a single sign-on experience <a id="_idIndexMarker220"/>to your users. In the following diagram, you can see a decision tree that helps you to decide which of them is the best for your organization:</p>
			<div><div><img src="img/Fig._3.39.jpg" alt="Figure. 3.39 - Azure AD Connect authentication decision tree&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.39 - Azure AD Connect authentication decision tree</p>
			<p><strong class="bold">Password Hash Sync + Seamless SSO</strong> is the easiest way to go. With this, your on-premises password hashes are replicated to the corresponding cloud identities, so users can use the same usernames and passwords across all login environments. Seamless SSO eliminates unnecessary login prompts when users are signed in.</p>
			<p>If you have stronger requirements, such as user-level AD security policies that should be enforced during sign-in, you can go with <strong class="bold">Pass-through Auth + Seamless SSO</strong>. In this scenario, you install a software agent on one or more on-premises servers. These servers can validate your user credentials directly against your on-premises domain controllers by building up a secure tunnel through which cloud-based logons can be validated.</p>
			<p><strong class="bold">Federation</strong> with <strong class="bold">Active Directory Federation Services (AD FS)</strong> or another federation service is the <a id="_idIndexMarker221"/>most complex authentication method. It should be used in scenarios where sign-in features are not natively supported by Azure AD. These features include the following: </p>
			<ul>
				<li>Sign-in using smartcards or certificates.</li>
				<li>Sign-in using an on-premises MFA server.</li>
				<li>Sign-in using a third-party authentication solution.</li>
				<li>Multi-site on-premises authentication solutions.<p class="callout-heading">Tip</p><p class="callout">We recommend always enabling password hash synchronization in Azure AD Connect. Doing so, you have a fallback scenario in case your on-premises authentication platform is not working properly, and you <a id="_idIndexMarker222"/>can use Azure AD Identity Protection to get leaked credential reports. Furthermore, you can enable <strong class="bold">self-service password reset</strong> (<strong class="bold">SSPR</strong>) when password hash synchronization is enabled.</p></li>
			</ul>
			<p>With SSPR, you can <a id="_idIndexMarker223"/>effectively reduce both users' non-effective time and support efforts for your helpdesk team. SSPR provides users with an effective means to unblock their corporate <a id="_idIndexMarker224"/>accounts if they forget their passwords. In order to use SSPR, users must provide a secondary authentication method. When they lose access to their corporate password, users need to verify their previously registered alternate authentication method to prove their identity. After that, the user can enter a new password. If it is a hybrid user account, meaning an account that is replicated by Azure AD Connect, the new password is written back <a id="_idIndexMarker225"/>to the on-premises Active Directory. The feature you need to enable in Azure AD Connect in this case is called <em class="italic">password writeback</em>.</p>
			<p>Currently, there is a preview for the combined registration of SSPR and MFA that offers you a new experience for your users' security registration.</p>
			<div><div><img src="img/Fig._3.40.jpg" alt="Figure. 3.40 - Combined registration for SSPR and MFA&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.40 - Combined registration for SSPR and MFA</p>
			<p>Today, you can <a id="_idIndexMarker226"/>enable it for your Azure AD tenant by navigating to <strong class="bold">Azure Active Directory</strong> -&gt; <strong class="bold">User Settings</strong> -&gt; <strong class="bold">Manage User Feature Preview Settings</strong>. You can enable the <a id="_idIndexMarker227"/>preview features for all users or a selected group, as shown in the following screenshot:</p>
			<div><div><img src="img/Fig._3.41.jpg" alt="Figure. 3.41 - Enabling combined registration for SSPR and MFA in your tenant&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.41 - Enabling combined registration for SSPR and MFA in your tenant</p>
			<p>After that, users for whom this setting applies are able to use the new experience at <a href="https://myprofile.microsoft.com/">https://myprofile.microsoft.com/</a>.</p>
			<div><div><img src="img/Fig._3.42.jpg" alt="Figure. 3.42 - The new combined experience&#13;&#10;"/>
				</div>
			</div>
			<p class="figure"> </p>
			<p class="figure-caption">Figure. 3.42 - The new combined experience</p>
			<p>Integrating <a id="_idIndexMarker228"/>on-premises identities into Azure AD is a great way to enhance <a id="_idIndexMarker229"/>the sign-in experience across your hybrid organization, and you just learned about the considerations to bear in mind before starting your hybrid journey. In the <em class="italic">Exploring passwords and passphrases </em>section, you learned that passwords are not good enough to protect your accounts. So, let's move on now to passwordless sign-ins in Azure AD.</p>
			<h1 id="_idParaDest-78"><a id="_idTextAnchor080"/>Understanding passwordless authentication</h1>
			<p>In a world in which passwords are not enough to protect identities, we need another, more secure, approach to <a id="_idIndexMarker230"/>further protect identities. Passwords can be guessed or phished without physically having access to a user's device or storage. With passwordless authentication, Azure AD offers two different methods to sign in to a cloud-based user account without needing passwords anymore.</p>
			<p>You can use the <strong class="bold">Microsoft Authenticator app</strong>, the app <a id="_idIndexMarker231"/>you already know from the <em class="italic">Understanding MFA</em> section. With this method, you are prompted to approve your sign-in by tapping a number in the Authenticator app, as shown in the following screenshot:</p>
			<div><div><img src="img/Fig._3.43.jpg" alt="Figure. 3.43 - Phone-based passwordless authentication&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.43 - Phone-based passwordless authentication</p>
			<p>All the user <a id="_idIndexMarker232"/>has to do is to register the app as an MFA option and then, in the smartphone app, choose <strong class="bold">Enable phone sign-in</strong> from the drop-down menu. After following the <a id="_idIndexMarker233"/>instructions in the app, the user can sign in to the app, without entering a password.</p>
			<p>The second <a id="_idIndexMarker234"/>option is to use a <strong class="bold">FIDO2 security key</strong> to sign in against Azure AD. FIDO2-based passwordless authentication is currently in preview and is only supported on Windows 10 and in the Microsoft Edge browser.</p>
			<div><div><img src="img/Fig._3.44.jpg" alt="Figure. 3.44 - FIDO2 security keys&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.44 - FIDO2 security keys</p>
			<p>Using this method, the user needs to have physical access to the security key that is needed during the authentication process. The user needs to be enabled for the enhanced security registration preview so access to the <a href="https://myprofile.microsoft.com/">https://myprofile.microsoft.com/</a> portal is enabled, as described in the <em class="italic">Hybrid authentication and SSO</em> section. To use a security key, it needs to be added to the user's security info, as shown in the following screenshot:</p>
			<div><div><img src="img/Fig._3.45.jpg" alt="Figure. 3.45 - Associating a security key with a user's profile&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.45 - Associating a security key with a user's profile</p>
			<p>After following <a id="_idIndexMarker235"/>the instructions, the user will be able to authenticate against Azure AD without entering a password.</p>
			<h2 id="_idParaDest-79"><a id="_idTextAnchor081"/>Global settings</h2>
			<p>Before you <a id="_idIndexMarker236"/>can enable passwordless authentication on a per-user basis, the feature needs to be enabled for the Azure AD tenant. The settings can be found in the Azure AD portal under <strong class="bold">Azure AD </strong>-&gt;<strong class="bold"> Security </strong>-&gt;<strong class="bold"> Authentication methods</strong>, as shown in the following screenshot:</p>
			<div><div><img src="img/Fig._3.46.jpg" alt="Figure. 3.46 - Enabling passwordless authentication for an Azure AD tenant&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 3.46 - Enabling passwordless authentication for an Azure AD tenant</p>
			<p>You have now learned how to enable passwordless authentication for your users. In the next section, you will <a id="_idIndexMarker237"/>learn about the licensing of security features in Azure AD.</p>
			<h1 id="_idParaDest-80"><a id="_idTextAnchor082"/>Licensing considerations</h1>
			<p>Azure AD licensing can become a bit complex when it comes to security features. This is why we decided to <a id="_idIndexMarker238"/>compare different licenses and to explain which license you need for which feature. Azure AD is always licensed on a per-user basis, so you need one respective license for each user. For all security features that have been discussed in this chapter, you will either need an Azure AD Premium P1 or an Azure AD Premium P2 license. These licenses are also part <a id="_idIndexMarker239"/>of Microsoft 365 and <strong class="bold">Enterprise Mobility + Security</strong> (<strong class="bold">EMS</strong>) license packages.</p>
			<ul>
				<li>Microsoft 365 E3 contains EMS E3, which contains features of Azure AD Premium P1.</li>
				<li>Microsoft 365 E5 contains EMS E5, which contains features of Azure AD Premium P2.</li>
				<li>For the following features, you will <a id="_idIndexMarker240"/>need an Azure AD Premium P2 license:</li>
				<li>Azure AD PIM</li>
				<li>Azure AD Identity Pr<a id="_idTextAnchor083"/>otection</li>
				<li>Risk-based Conditional Access policies</li>
			</ul>
			<p>For the following features, an <a id="_idIndexMarker241"/>Azure AD Premium P1 license is sufficient:</p>
			<ul>
				<li>Azure MFA</li>
				<li>Conditional Access based on group, location, and device status</li>
				<li>Self-service password reset</li>
			</ul>
			<h1 id="_idParaDest-81"><a id="_idTextAnchor084"/>Summary</h1>
			<p>Identity is the new perimeter and so it's essential to properly protect user and administrator accounts in the cloud. In this chapter, you have learned why passwords are not enough to protect your accounts and how to protect them with MFA, Azure AD Identity Protection, and passwordless authentication. You are able to reduce your privileged accounts' attack surface as of now, to integrate Azure AD into your existing environments.</p>
			<p>In the next chapter, you will learn how to protect network infrastructure resources on Azure and which platform services you need to achieve a better security posture.</p>
			<h1 id="_idParaDest-82"><a id="_idTextAnchor085"/>Questions</h1>
			<ol>
				<li value="1">With the cloud, identity is…<p>A. More exposed to attacks</p><p>B. Less exposed to attacks</p><p>C. Equally exposed to attacks</p></li>
				<li>We can control password settings with…<p>A. Azure AD protection</p><p>B. Account protection</p><p>C. Password protection</p></li>
				<li>We can increase account security with…<p>A. More complex passwords</p><p>B. More frequent password changes</p><p>C. Multi-Factor Authentication (MFA)</p><p>D. Two-Factor Authentication (2FA)</p></li>
				<li>You can control actions that require MFA.<p>A. Yes</p><p>B. No</p><p>C. Only for some actions</p></li>
				<li>Which report is not available in risk detection?<p>A. Users with leaked credentials</p><p>B. Impossible travel</p><p>C. Infected users</p><p>D. Infected devices</p></li>
				<li>With roles in <strong class="bold">Privileged Identity Management</strong> (<strong class="bold">PIM</strong>), the user has…<p>A. More privileges</p><p>B. Fewer privileges</p><p>C. To activate privileges</p></li>
				<li>The most secure authentication is…<p>A. A strong password</p><p>B. MFA</p><p>C. Passwordless</p></li>
			</ol>
		</div>
	</body></html>